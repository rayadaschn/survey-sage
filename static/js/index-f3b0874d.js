function e(){import.meta.url,import("_").catch((()=>1))}import{r as s,ac as t,ad as r,K as n,ae as i,af as a,ag as l,aa as c,ah as d,ab as o,ai as h,aj as x,R as j}from"./@ant-design/icons-8bf8c374.js";import{r as m,S as u,T as p,L as f,m as _,B as g,D as v,F as y,I as b,R as N,a as w,P as C,M as S,E as q,b as P,C as k,t as I}from"./antd-c3061117.js";import{L as O,O as T,u as A,a as z,b as R,c as E,d as F,R as L}from"./react-router-dom-9c6c9179.js";import{a as D}from"./axios-83bdef92.js";import{u as M}from"./ahooks-120d5cf2.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)})).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();var W={exports:{}},$={},B=s,K=Symbol.for("react.element"),U=Symbol.for("react.fragment"),H=Object.prototype.hasOwnProperty,J=B.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Q={key:!0,ref:!0,__self:!0,__source:!0};function V(e,s,t){var r,n={},i=null,a=null;for(r in void 0!==t&&(i=""+t),void 0!==s.key&&(i=""+s.key),void 0!==s.ref&&(a=s.ref),s)H.call(s,r)&&!Q.hasOwnProperty(r)&&(n[r]=s[r]);if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===n[r]&&(n[r]=s[r]);return{$$typeof:K,type:e,key:i,ref:a,props:n,_owner:J.current}}$.Fragment=U,$.jsx=V,$.jsxs=V,W.exports=$;var Y=W.exports;var G={},X=m;G.createRoot=X.createRoot,G.hydrateRoot=X.hydrateRoot;const Z="_header_djf0z_1",ee="_left_djf0z_4",se="_right_djf0z_7",te="_main_djf0z_10",re="_footer_djf0z_13",ne="_container_1fxih_1",{Title:ie}=p,ae=()=>Y.jsx("div",{className:ne,children:Y.jsx(O,{to:"/",children:Y.jsxs(u,{children:[Y.jsx(ie,{children:Y.jsx(t,{})}),Y.jsx(ie,{children:"问卷调查"})]})})}),le=()=>Y.jsx(Y.Fragment,{children:Y.jsx(O,{to:ts,children:"登录"})}),{Header:ce,Content:de,Footer:oe}=f,he=()=>Y.jsxs(f,{children:[Y.jsxs(ce,{className:Z,children:[Y.jsx("div",{className:ee,children:Y.jsx(ae,{})}),"MainLayout header",Y.jsx("div",{className:se,children:Y.jsx(le,{})})]}),Y.jsx(de,{className:te,children:Y.jsx(T,{})}),Y.jsx(oe,{className:re,children:"文件调查@2023 Created by Huy"})]}),xe="_container_drwq3_1",je="_left_drwq3_7",me="_right_drwq3_10",ue="keyword",pe=D.create({timeout:1e4,baseURL:"/"});pe.interceptors.response.use((e=>{const s=e.data||{},{errno:t,data:r,msg:n}=s;if(0!==t)throw n&&_.error(n),new Error(n);return r}));const fe=()=>{const e=A(),{pathname:t}=z(),[l,c]=s.useState(!1);return Y.jsxs("div",{className:xe,children:[Y.jsx("div",{className:je,children:Y.jsxs(u,{direction:"vertical",children:[Y.jsx(g,{type:"primary",size:"large",icon:Y.jsx(r,{}),onClick:async function(){c(!0);const s=await async function(){return await pe.post("/api/question/")}(),{id:t}=s||{};t&&(e("question/edit/".concat(t)),_.success("创建成功")),c(!1)},disabled:l,children:"新建问卷"}),Y.jsx(v,{}),Y.jsx(g,{type:t.startsWith("/manage/list")?"default":"text",size:"large",icon:Y.jsx(n,{}),onClick:()=>e("/manage/list"),children:"我的问卷"}),Y.jsx(g,{type:t.startsWith("/manage/star")?"default":"text",size:"large",icon:Y.jsx(i,{}),onClick:()=>e("/manage/star"),children:"星标问卷"}),Y.jsx(g,{type:t.startsWith("/manage/trash")?"default":"text",size:"large",icon:Y.jsx(a,{}),onClick:()=>e("/manage/trash"),children:"回收站"})]})}),Y.jsx("div",{className:me,children:Y.jsx(T,{})})]})},_e=()=>Y.jsxs(Y.Fragment,{children:[Y.jsx("p",{children:"Question layout"}),Y.jsx("div",{children:Y.jsx(T,{})})]}),{Title:ge}=p,ve=()=>Y.jsxs("div",{className:"flex flex-col items-center justify-center bg-white",children:[Y.jsx("div",{children:Y.jsxs(u,{children:[Y.jsx(ge,{level:2,children:Y.jsx(l,{})}),Y.jsx(ge,{level:2,children:"注册新用户"})]})}),Y.jsx("div",{children:Y.jsxs(y,{labelCol:{span:6},wrapperCol:{span:16},onFinish:e=>{},children:[Y.jsx(y.Item,{label:"用户名",name:"username",rules:[{required:!0,message:"请输入用户名"},{type:"string",min:5,max:20,message:"字符长度在 5-20 之间"},{pattern:/^\w+$/,message:"只能所字符下划线"}],children:Y.jsx(b,{})}),Y.jsx(y.Item,{label:"密码",name:"password",rules:[{required:!0,message:"请输入密码"}],children:Y.jsx(b.Password,{})}),Y.jsx(y.Item,{label:"确认密码",name:" confirm",rules:[{required:!0,message:"请输入密码"},({getFieldValue:e})=>({validator:(s,t)=>t&&e("password")!==t?Promise.reject(new Error("两次密码不一致")):Promise.resolve()})],children:Y.jsx(b.Password,{})}),Y.jsx(y.Item,{label:"昵称",name:"nickname",children:Y.jsx(b,{})}),Y.jsx(y.Item,{wrapperCol:{offset:4,span:18},children:Y.jsxs(u,{children:[Y.jsx(g,{type:"primary",htmlType:"submit",children:"注册"}),Y.jsx(O,{to:ts,children:"已有账户，请登录"})]})})]})})]}),ye=()=>{const e=A();return Y.jsx(Y.Fragment,{children:Y.jsx(N,{status:"404",title:"404",subTitle:"抱歉，您访问的页面不存在",extra:Y.jsx(g,{type:"primary",onClick:()=>e(rs),children:"返回首页"})})})},be={header:"_header_1euva_1",left:"_left_1euva_4",right:"_right_1euva_7",content:"_content_1euva_11",footer:"_footer_1euva_14"},Ne="_container_1bfhx_1",we="_title_1bfhx_10",Ce="_left_1bfhx_13",Se="_right_1bfhx_16",qe="_button-container_1bfhx_21",{confirm:Pe}=S,ke=e=>{const{id:s,title:t,isPublished:r,answerContent:n,currentAt:l,isStar:x}=e,j=A();return Y.jsxs("div",{className:Ne,children:[Y.jsxs("div",{className:we,children:[Y.jsx("div",{className:Ce,children:Y.jsx(O,{to:r?"/question/stat/".concat(s):"/question/edit/".concat(s),children:Y.jsxs(u,{children:[x&&Y.jsx(i,{style:{color:"red"}}),t]})})}),Y.jsx("div",{className:Se,children:Y.jsxs(u,{children:[r?Y.jsx(w,{color:"processing",children:"已发布"}):Y.jsx(w,{children:"未发布"}),Y.jsxs("span",{children:["答卷: ",n]}),Y.jsx("span",{children:l})]})})]}),Y.jsx(v,{className:"m-3"}),Y.jsxs("div",{className:qe,children:[Y.jsx("div",{className:Ce,children:Y.jsxs(u,{children:[Y.jsx(g,{icon:Y.jsx(c,{}),type:"text",size:"small",onClick:()=>{j("/question/edit/".concat(s))},children:"编辑问卷"}),Y.jsx(g,{icon:Y.jsx(d,{}),type:"text",size:"small",onClick:()=>{j("/question/stat/".concat(s))},children:"数据统计"})]})}),Y.jsx("div",{className:Se,children:Y.jsxs(u,{children:[Y.jsx(g,{type:"text",icon:Y.jsx(i,{}),size:"small",children:"标星"}),Y.jsx(C,{title:"确定复制该问卷?",okText:"确认",cancelText:"取消",onConfirm:()=>{},children:Y.jsx(g,{type:"text",icon:Y.jsx(o,{}),size:"small",children:"复制"})}),Y.jsx(g,{type:"text",icon:Y.jsx(a,{}),size:"small",onClick:()=>{Pe({title:"确定删除该问卷?",icon:Y.jsx(h,{}),onOk:()=>_.success("删除")})},children:"删除"})]})})]})]})},{Search:Ie}=b,Oe=()=>{const e=A(),{pathname:t}=z(),[r,n]=s.useState("");const[i]=R();return s.useEffect((()=>{const e=i.get(ue)||"";n(e)}),[i]),Y.jsx(Ie,{placeholder:"请输入关键字",value:r,onChange:function(e){n(e.target.value)},onSearch:function(s){e({pathname:t,search:"".concat(ue,"=").concat(s)})},className:"w-50"})},{Title:Te}=p,Ae=[{id:"q1",title:"问卷 1",isPublished:!1,isStar:!1,answerContent:9,currentAt:"1 月 1 日 12:45"},{id:"q2",title:"问卷 2",isPublished:!0,isStar:!1,answerContent:3,currentAt:"2 月 1 日 12:45"},{id:"q3",title:"问卷 3",isPublished:!1,isStar:!0,answerContent:1,currentAt:"3 月 1 日 12:45"},{id:"q4",title:"问卷 4",isPublished:!0,isStar:!0,answerContent:6,currentAt:"4 月 1 日 12:45"}],ze=()=>{const[e,t]=s.useState(Ae);return Y.jsxs(Y.Fragment,{children:[Y.jsxs("div",{className:be.header,children:[Y.jsx("div",{className:be.left,children:Y.jsx(Te,{level:3,children:"我的问卷"})}),Y.jsx("div",{className:be.right,children:Y.jsx(Oe,{})})]}),Y.jsx("div",{className:be.content,children:e.map((e=>{const{id:s}=e;return Y.jsx(ke,{...e},s)}))}),Y.jsx("div",{className:be.foot,children:"footer"})]})},Re="_header_1euva_1",Ee="_left_1euva_4",Fe="_right_1euva_7",Le="_content_1euva_11",{Title:De}=p,{confirm:Me}=S,We=[{id:"q1",title:"问卷 1",isPublished:!1,isStar:!1,answerContent:9,currentAt:"1 月 1 日 12:45"},{id:"q2",title:"问卷 2",isPublished:!0,isStar:!1,answerContent:3,currentAt:"2 月 1 日 12:45"},{id:"q3",title:"问卷 3",isPublished:!1,isStar:!0,answerContent:1,currentAt:"3 月 1 日 12:45"},{id:"q4",title:"问卷 4",isPublished:!0,isStar:!0,answerContent:6,currentAt:"4 月 1 日 12:45"}],$e=()=>{M("问卷调查");const[e]=s.useState(We),[t,r]=s.useState([]),n=[{title:"标题",dataIndex:"title"},{title:"是否发布",dataIndex:"isPublished",render:e=>e?Y.jsx(w,{color:"processing",children:"已发布"}):Y.jsx(w,{children:"未发布"})},{title:"答卷",dataIndex:"answerContent"},{title:"创建时间",dataIndex:"currentAt"}];return Y.jsxs(Y.Fragment,{children:[Y.jsxs("div",{className:Re,children:[Y.jsx("div",{className:Ee,children:Y.jsx(De,{level:3,children:"回收站"})}),Y.jsx("div",{className:Fe,children:Y.jsx(Oe,{})})]}),Y.jsxs("div",{className:Le,children:[0===e.length&&Y.jsx(q,{description:"暂无数据"}),e.length>0&&Y.jsxs("div",{children:[Y.jsxs(u,{className:"mb",children:[Y.jsx(g,{type:"primary",disabled:0===t.length,children:"恢复"}),Y.jsx(g,{danger:!0,disabled:0===t.length,onClick:()=>{Me({title:"确定彻底删除该问卷?",icon:Y.jsx(x,{}),content:"删除以后不可撤回",onOk:()=>alert("删除")})},children:"彻底删除"})]}),Y.jsx(P,{rowKey:e=>e.id,dataSource:e,columns:n,pagination:!1,rowSelection:{type:"checkbox",onChange:e=>{r(e)}}})]})]})]})},Be={header:"_header_1euva_1",left:"_left_1euva_4",right:"_right_1euva_7",content:"_content_1euva_11",footer:"_footer_1euva_14"},{Title:Ke}=p,Ue=[{id:"q3",title:"问卷 3",isPublished:!1,isStar:!0,answerContent:1,currentAt:"3 月 1 日 12:45"},{id:"q4",title:"问卷 4",isPublished:!0,isStar:!0,answerContent:6,currentAt:"4 月 1 日 12:45"}],He=()=>{const[e]=s.useState(Ue);return Y.jsxs(Y.Fragment,{children:[Y.jsxs("div",{className:Be.header,children:[Y.jsx("div",{className:Be.left,children:Y.jsx(Ke,{level:3,children:"星标问卷"})}),Y.jsx("div",{className:Be.right,children:Y.jsx(Oe,{})})]}),Y.jsxs("div",{className:Be.content,children:[0===e.length&&Y.jsx(q,{description:"暂无数据"}),e.map((e=>{const{id:s}=e;return Y.jsx(ke,{...e},s)}))]}),Y.jsx("div",{className:Be.foot,children:"分页"})]})};function Je(){const{id:e=""}=E(),[t,r]=s.useState(!0),[n,i]=s.useState({});return s.useEffect((()=>{!async function(){const s=await async function(e){const s="/api/question/".concat(e);return await pe.get(s)}(e);i(s),r(!1)}()}),[e]),{loading:t,questionData:n}}const Qe=()=>{const{loading:e,questionData:s}=Je();return Y.jsxs("div",{children:[Y.jsx("p",{children:"编辑"}),e?Y.jsx("p",{children:"loading"}):Y.jsx("p",{children:JSON.stringify(s)})]})},Ve=()=>{const{loading:e,questionData:s}=Je();return Y.jsxs("div",{children:[Y.jsx("p",{children:"Stat"}),e?Y.jsx("p",{children:"loading"}):Y.jsx("p",{children:JSON.stringify(s)})]})},{Title:Ye,Paragraph:Ge}=p,Xe=()=>{const e=A();return Y.jsx("div",{className:"h-150 flex flex-col items-center justify-center",children:Y.jsxs("div",{className:"text-center",children:[Y.jsx(Ye,{children:"问卷调查 | 在线投票"}),Y.jsx(Ge,{children:"已经累计创建问卷 500 份，发布问卷 80 份，收到答卷 2000 份"}),Y.jsx("div",{className:"h-15 font-24",children:Y.jsx(g,{className:"b-rounded-4",type:"primary",onClick:()=>e(rs),children:"开始使用"})})]})})},{Title:Ze}=p,es=()=>Y.jsxs("div",{className:"flex flex-col items-center justify-center bg-white",children:[Y.jsx("div",{children:Y.jsxs(u,{children:[Y.jsx(Ze,{level:2,children:Y.jsx(l,{})}),Y.jsx(Ze,{level:2,children:"登录"})]})}),Y.jsx("div",{children:Y.jsxs(y,{labelCol:{span:6},wrapperCol:{span:16},onFinish:e=>{},children:[Y.jsx(y.Item,{label:"用户名",name:"username",rules:[{required:!0,message:"请输入用户名"},{type:"string",min:5,max:20,message:"字符长度在 5-20 之间"},{pattern:/^\w+$/,message:"只能所字符下划线"}],children:Y.jsx(b,{})}),Y.jsx(y.Item,{label:"密码",name:"password",rules:[{required:!0,message:"请输入密码"}],children:Y.jsx(b.Password,{})}),Y.jsx(y.Item,{wrapperCol:{offset:4,span:18},children:Y.jsxs(u,{children:[Y.jsx(g,{type:"primary",htmlType:"submit",children:"登录"}),Y.jsx(O,{to:"/",children:"注册新用户"})]})})]})})]}),ss=F([{path:"/",element:Y.jsx(he,{}),children:[{path:"/",element:Y.jsx(Xe,{})},{path:"login",element:Y.jsx(es,{})},{path:"register",element:Y.jsx(ve,{})},{path:"manage",element:Y.jsx(fe,{}),children:[{path:"list",element:Y.jsx(ze,{})},{path:"star",element:Y.jsx(He,{})},{path:"trash",element:Y.jsx($e,{})}]},{path:"*",element:Y.jsx(ye,{})}]},{path:"question",element:Y.jsx(_e,{}),children:[{path:"edit/:id",element:Y.jsx(Qe,{})},{path:"stat/:id",element:Y.jsx(Ve,{})}]}],{basename:"/survey-sage"}),ts="/login",rs="/manage/list",ns=()=>Y.jsx(k,{theme:{algorithm:I.defaultAlgorithm},children:Y.jsx(L,{router:ss})});G.createRoot(document.getElementById("root")).render(Y.jsx(j.StrictMode,{children:Y.jsx(ns,{})}));export{e as __vite_legacy_guard};
