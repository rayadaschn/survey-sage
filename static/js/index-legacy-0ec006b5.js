System.register(["./@ant-design/icons-legacy-3b08bf95.js","./@dnd-kit/core-legacy-21272773.js","./react-redux-legacy-ae375a2f.js","./@reduxjs/toolkit-legacy-00116e75.js","./@dnd-kit/sortable-legacy-67e03475.js","./lodash-es-legacy-e3523841.js","./redux-undo-legacy-f3ba457c.js","./react-router-dom-legacy-4de26926.js","./antd-legacy-dca60dc3.js","./axios-legacy-787fab56.js","./ahooks-legacy-d8b4bfed.js","./@dnd-kit/utilities-legacy-ded65fa0.js"],(function(e,s){"use strict";var t,n,a,r,c,i,o,l,d,m,u,x,p,h,j,g,f,y,v,b,w,S,C,k,I,N,_,E,L,P,F,R,q,T,z,D,$,U,O,A,H,B,M,W,V,K,G,Y,J,Q,X,Z,ee,se;return{setters:[e=>{t=e.r,n=e.af,a=e.ag,r=e.U,c=e.M,i=e.ah,o=e.ai,l=e.aj,d=e.ad,m=e.ak,u=e.ae,x=e.al,p=e.R},e=>{h=e.r},e=>{j=e.u,g=e.a,f=e.P},e=>{y=e.c,v=e.p,b=e.a},e=>{w=e.a},e=>{S=e.c},e=>{C=e.C,k=e.D},e=>{I=e.L,N=e.u,_=e.a,E=e.b,L=e.O,P=e.c,F=e.R},e=>{R=e.S,q=e.m,T=e.B,z=e.L,D=e.a,$=e.D,U=e.F,O=e.I,A=e.T,H=e.R,B=e.b,M=e.P,W=e.M,V=e.E,K=e.c,G=e.d,Y=e.C,J=e.e,Q=e.t},e=>{X=e.a},e=>{Z=e.F,ee=e.G,se=e.H},null],execute:function(){var te=document.createElement("style");te.textContent='#--unocss--{layer:__ALL__}:root{--w-space-xs: 8px;--w-space-sm: 16px;--w-space: 24px;--w-space-lg: 32px;--w-radius-xs: 4px;--w-radius: 8px;--w-radius-lg: 12px;--w-radius-xl: 16px;--c-white: #fff;--c-black: #000;--c-blue: #3b82f6;--c-red: #ef4444;--c-yellow: #f59e0b;--c-green: #42b983;--c-gray: #9ca3af;--c-disable: rgba(0, 0, 0, .25);--c-brand: var(--c-green);--c-bg: #f8f8f8;--c-text: #374151;--c-tips: var(--c-gray);--c-border: var(--c-gray);--c-mask: rgba(0, 0, 0, .7);--c-hover: var(--c-brand)}:root.dark{--c-bg: #181818;--c-text: #e5e7eb}html{width:100%;overflow-x:hidden}body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:"tnum";font-variant:tabular-nums;background-color:var(--c-bg);margin:0}::-webkit-scrollbar{width:6px;height:6px}::-webkit-scrollbar-thumb{background-color:#374151;border-radius:4px}::-webkit-scrollbar-thumb:hover{background-color:#1f2937}::-webkit-scrollbar-track{background-color:#6b7280;border-radius:4px}\n',document.head.appendChild(te),e({o:async function(e){const s=`/api/question/${e}`;return await Ge.get(s)},u:Ze});var ne={exports:{}},ae={},re=t,ce=Symbol.for("react.element"),ie=Symbol.for("react.fragment"),oe=Object.prototype.hasOwnProperty,le=re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,de={key:!0,ref:!0,__self:!0,__source:!0};function me(e,s,t){var n,a={},r=null,c=null;for(n in void 0!==t&&(r=""+t),void 0!==s.key&&(r=""+s.key),void 0!==s.ref&&(c=s.ref),s)oe.call(s,n)&&!de.hasOwnProperty(n)&&(a[n]=s[n]);if(e&&e.defaultProps)for(n in s=e.defaultProps)void 0===a[n]&&(a[n]=s[n]);return{$$typeof:ce,type:e,key:r,ref:c,props:a,_owner:le.current}}ae.Fragment=ie,ae.jsx=me,ae.jsxs=me,ne.exports=ae;var ue=e("j",ne.exports),xe={},pe=h;xe.createRoot=pe.createRoot,xe.hydrateRoot=pe.hydrateRoot;const he={username:"",nickname:""},je=y({name:"user",initialState:he,reducers:{loginReducer:(e,s)=>s.payload,logoutReducer:()=>he}}),ge=je.reducer,{loginReducer:fe,logoutReducer:ye}=je.actions,ve=y({name:"pageInfo",initialState:{title:"",desc:"",js:"",css:""},reducers:{resetPageInfo:(e,s)=>s.payload,changePageTitle:v(((e,s)=>{e.title=s.payload}))}}),be=ve.reducer,{resetPageInfo:we,changePageTitle:Se}=ve.actions;e({i:we,d:Se});let Ce=e("n",((e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,s)=>e+=(s&=63)<36?s.toString(36):s<62?(s-26).toString(36).toUpperCase():s>62?"-":"_"),"")));const ke=y({name:"components",initialState:{componentList:[],selectedId:"",copiedComponent:null},reducers:{resetComponents:(e,s)=>s.payload,changeSelectedId:v(((e,s)=>{e.selectedId=s.payload})),addComponent:v(((e,s)=>{Ne(e,s.payload)})),changeComponentProps:v(((e,s)=>{const{fe_id:t,newProps:n}=s.payload,a=e.componentList.find((e=>e.fe_id===t));a&&(a.props={...a.props,...n})})),removeSelectedComponent:v((e=>{const{componentList:s=[],selectedId:t}=e,n=Ie(t,s);e.selectedId=n;const a=s.findIndex((e=>e.fe_id===t));s.splice(a,1)})),changeComponentHidden:v(((e,s)=>{const{componentList:t=[]}=e,{fe_id:n,isHidden:a}=s.payload;let r="";r=a?Ie(n,t):n,e.selectedId=r;const c=t.find((e=>e.fe_id===n));c&&(c.isHidden=a)})),toggleComponentLocked:v(((e,s)=>{const{fe_id:t}=s.payload,n=e.componentList.find((e=>e.fe_id===t));n&&(n.isLocked=!n.isLocked)})),copySelectedComponent:v((e=>{const{selectedId:s,componentList:t=[]}=e,n=t.find((e=>e.fe_id===s));null!=n&&(e.copiedComponent=S(n))})),pasteCopiedComponent:v((e=>{const{copiedComponent:s}=e;null!=s&&(s.fe_id=Ce(),Ne(e,s))})),selectPrevComponent:v((e=>{const{selectedId:s,componentList:t}=e,n=t.findIndex((e=>e.fe_id===s));n<0||n<=0||(e.selectedId=t[n-1].fe_id)})),selectNextComponent:v((e=>{const{selectedId:s,componentList:t}=e,n=t.findIndex((e=>e.fe_id===s));n<0||n+1!==t.length&&(e.selectedId=t[n+1].fe_id)})),changeComponentTitle:v(((e,s)=>{const{title:t,fe_id:n}=s.payload,a=e.componentList.find((e=>e.fe_id===n));a&&(a.title=t)})),moveComponent:v(((e,s)=>{const{componentList:t}=e,{oldIndex:n,newIndex:a}=s.payload;e.componentList=w(t,n,a)}))}});function Ie(e,s){const t=s.filter((e=>!e.isHidden)),n=t.findIndex((s=>s.fe_id===e));if(n<0)return"";let a="";const r=t.length;return a=r<=1?"":n+1===r?t[n-1].fe_id:t[n+1].fe_id,a}function Ne(e,s){const{selectedId:t,componentList:n}=e,a=n.findIndex((e=>e.fe_id===t));a<0?e.componentList.push(s):e.componentList.splice(a+1,0,s),e.selectedId=s.fe_id}const{resetComponents:_e,changeSelectedId:Ee,addComponent:Le,changeComponentProps:Pe,removeSelectedComponent:Fe,changeComponentHidden:Re,toggleComponentLocked:qe,copySelectedComponent:Te,pasteCopiedComponent:ze,selectPrevComponent:De,selectNextComponent:$e,changeComponentTitle:Ue,moveComponent:Oe}=ke.actions;e({l:_e,f:Ee,e:Le,h:Pe,r:Fe,b:Re,t:qe,c:Te,p:ze,s:De,a:$e,g:Ue,m:Oe});const Ae=ke.reducer,He=b({reducer:{user:ge,pageInfo:be,components:C(Ae,{limit:20,filter:k(["components/resetComponents","components/changeSelectedId","components/selectPrevComponent","components/selectNextComponent"])})}}),Be=function(e,s,t){return e()},Me=()=>ue.jsx("div",{children:ue.jsx(I,{to:"/",children:ue.jsx(R,{children:ue.jsxs("div",{className:"text-7 color-white",children:[ue.jsx(n,{}),ue.jsx("span",{children:"问卷调查"})]})})})}),We="keyword",Ve="page",Ke="pageSize",Ge=(e("S",10),e("q",["#FF2D2D","#BE77FF","#2894FF","#00EC00","#EAC100","#FF9D6F"]),e("k",X.create({timeout:1e4,baseURL:"https://huy.wiki:3002/"})));Ge.interceptors.request.use((e=>(e.headers.Authorization=`Bearer ${localStorage.getItem(Ye)||""}`,e)),(e=>(q.error(e.message),Promise.reject(e)))),Ge.interceptors.response.use((e=>{const s=e.data||{},{errno:t,data:n,msg:a}=s;return 203===t||0!==t&&200!==t?(q.error(a||"请求失败"),Promise.reject(n)):n}),(e=>{let s="";const t=e.response?.status;switch(t){case 401:s="token 失效，请重新登录";break;case 403:s="拒绝访问";break;case 404:s="请求地址错误";break;case 500:s="服务器故障";break;default:s="网络连接故障"}return q.error(s),Promise.reject(e)}));const Ye="USER_TOKEN";function Je(){const{username:e,nickname:s}=j((e=>e.user));return{username:e,nickname:s}}async function Qe(){return await Ge.post("/api/question/")}async function Xe(e={}){return await Ge.get("/api/question",{params:e})}async function Ze(e,s){const t=`/api/question/${e}`;return await Ge.patch(t,s)}async function es(){return await Ge.get("/api/user/info")}function ss(e={}){const{isStar:s,isDeleted:t}=e,[n]=N(),{data:a,loading:r,error:c,refresh:i}=Z((async()=>{const e=n.get(We)||"",a=parseInt(n.get(Ve)||"")||1,r=parseInt(n.get(Ke)||"")||10;return await Xe({keyword:e,isStar:s,isDeleted:t,page:a,pageSize:r})}),{refreshDeps:[n]});return{data:a,loading:r,error:c,refresh:i}}function ts(){const e=g(),[s,n]=t.useState(!0),{run:a}=Z(es,{manual:!0,onSuccess(s){const{username:t,nickname:n}=s;e(fe({username:t,nickname:n}))},onFinally(){n(!1)}}),{username:r}=Je();return t.useEffect((()=>{r?n(!1):a()}),[s]),{waitingUserData:s}}function ns(e){const{username:s}=Je(),{pathname:n}=_(),a=E();t.useEffect((()=>{e||(s?function(e){return[Ds,$s].includes(e)}(n)&&a(Us):function(e){return[zs,Ds,$s].includes(e)}(n)||a(Ds))}),[e,s,n])}const as=()=>{const e=E(),s=g(),{username:t,nickname:n}=Je(),r=ue.jsxs(ue.Fragment,{children:[ue.jsxs("span",{className:"color-light",children:[ue.jsx(a,{}),n]}),ue.jsx(T,{type:"link",onClick:function(){s(ye()),localStorage.removeItem(Ye),q.success("退出成功"),e(Ds)},children:"退出"})]}),c=ue.jsx(I,{to:Ds,children:"登录"});return ue.jsx(ue.Fragment,{children:t?r:c})},{Header:rs,Content:cs,Footer:is}=z,os=()=>{const{waitingUserData:e}=ts();return ns(e),ue.jsxs(z,{children:[ue.jsxs(rs,{className:"px-6",children:[ue.jsx("div",{className:"float-left",children:ue.jsx(Me,{})}),"MainLayout header",ue.jsx("div",{className:"float-right",children:ue.jsx(as,{})})]}),ue.jsx(cs,{className:"min-h-[calc(100vh-140px)]",children:e?ue.jsx("div",{className:"mt-15 text-center",children:ue.jsx(D,{})}):ue.jsx(L,{})}),ue.jsx(is,{className:"border-t border-gray-200 border-solid bg-white text-center",children:"问卷调查 ©2023 - present. Created by Huy"})]})},ls=()=>{const e=E(),{pathname:s}=_(),{loading:t,run:n}=Z(Qe,{manual:!0,onSuccess(s){e(`question/edit/${s.id}`),q.success("创建成功")}});return ue.jsxs("div",{className:"mx-auto my-0 w-300 flex py-6",children:[ue.jsx("div",{className:"w-30",children:ue.jsxs(R,{direction:"vertical",children:[ue.jsx(T,{type:"primary",size:"large",icon:ue.jsx(r,{}),onClick:n,disabled:t,children:"新建问卷"}),ue.jsx($,{}),ue.jsx(T,{type:s.startsWith("/manage/list")?"default":"text",size:"large",icon:ue.jsx(c,{}),onClick:()=>e("/manage/list"),children:"我的问卷"}),ue.jsx(T,{type:s.startsWith("/manage/star")?"default":"text",size:"large",icon:ue.jsx(i,{}),onClick:()=>e("/manage/star"),children:"星标问卷"}),ue.jsx(T,{type:s.startsWith("/manage/trash")?"default":"text",size:"large",icon:ue.jsx(o,{}),onClick:()=>e("/manage/trash"),children:"回收站"})]})}),ue.jsx("div",{className:"ml-15 flex-1",children:ue.jsx(L,{})})]})},ds=()=>{const{waitingUserData:e}=ts();return ns(e),ue.jsx("div",{className:"h-screen",children:e?ue.jsx("div",{className:"mt-15 text-center",children:ue.jsx(D,{})}):ue.jsx(L,{})})},{Title:ms}=A,us=()=>{const e=E(),{run:s}=Z((async e=>{const{username:s,password:t,nickname:n}=e;await async function(e,s,t){const n={username:e,password:s,nickname:t||e};return await Ge.post("/api/user/register",n)}(s,t,n)}),{manual:!0,onSuccess(){q.success("注册成功"),e(Ds)}});return ue.jsxs("div",{className:"flex flex-col items-center justify-center bg-white",children:[ue.jsx("div",{children:ue.jsxs(R,{children:[ue.jsx(ms,{level:2,children:ue.jsx(l,{})}),ue.jsx(ms,{level:2,children:"注册新用户"})]})}),ue.jsx("div",{children:ue.jsxs(U,{labelCol:{span:6},wrapperCol:{span:16},onFinish:e=>{s(e)},children:[ue.jsx(U.Item,{label:"用户名",name:"username",rules:[{required:!0,message:"请输入用户名"},{type:"string",min:5,max:20,message:"字符长度在 5-20 之间"},{pattern:/^\w+$/,message:"只能所字符下划线"}],children:ue.jsx(O,{})}),ue.jsx(U.Item,{label:"密码",name:"password",rules:[{required:!0,message:"请输入密码"}],children:ue.jsx(O.Password,{})}),ue.jsx(U.Item,{label:"确认密码",name:" confirm",rules:[{required:!0,message:"请输入密码"},({getFieldValue:e})=>({validator:(s,t)=>t&&e("password")!==t?Promise.reject(new Error("两次密码不一致")):Promise.resolve()})],children:ue.jsx(O.Password,{})}),ue.jsx(U.Item,{label:"昵称",name:"nickname",children:ue.jsx(O,{})}),ue.jsx(U.Item,{wrapperCol:{offset:4,span:18},children:ue.jsxs(R,{children:[ue.jsx(T,{type:"primary",htmlType:"submit",children:"注册"}),ue.jsx(I,{to:Ds,children:"已有账户，请登录"})]})})]})})]})},xs=()=>{const e=E();return ue.jsx(ue.Fragment,{children:ue.jsx(H,{status:"404",title:"404",subTitle:"抱歉，您访问的页面不存在",extra:ue.jsx(T,{type:"primary",onClick:()=>e(Us),children:"返回首页"})})})},{confirm:ps}=W,hs=e=>{const s=E(),{_id:n,title:a,isPublished:r,answerContent:c,currentAt:l,isStar:p}=e,[h,j]=t.useState(p),{loading:g,run:f}=Z((async()=>{await Ze(n,{isStar:!h})}),{manual:!0,onSuccess(){j(!h),q.success("已更新")}}),{loading:y,run:v}=Z((async()=>await async function(e){const s=`/api/question/duplicate/${e}`;return await Ge.post(s)}(n)),{manual:!0,onSuccess(e){q.success("复制成功"),s(`/question/edit/${e.id}`)}}),[b,w]=t.useState(!1),{loading:S,run:C}=Z((async()=>await Ze(n,{isDeleted:!0})),{manual:!0,onSuccess(){q.success("删除成功"),w(!0)}});return b?null:ue.jsxs("div",{className:"mb-2.5 border-rounded bg-white p-3 transition-transform hover:scale-105 hover:transform hover:shadow-md",children:[ue.jsxs("div",{className:"flex",children:[ue.jsx("div",{className:"flex-1",children:ue.jsx(I,{to:r?`/question/stat/${n}`:`/question/edit/${n}`,children:ue.jsxs(R,{children:[p&&ue.jsx(i,{style:{color:"red"}}),a]})})}),ue.jsx("div",{className:"flex-1 text-center font-size-3",children:ue.jsxs(R,{children:[r?ue.jsx(B,{color:"processing",children:"已发布"}):ue.jsx(B,{children:"未发布"}),ue.jsxs("span",{children:["答卷: ",c]}),ue.jsx("span",{children:l})]})})]}),ue.jsx($,{className:"m-3"}),ue.jsxs("div",{className:"flex",children:[ue.jsx("div",{className:"flex-1",children:ue.jsxs(R,{children:[ue.jsx(T,{icon:ue.jsx(d,{}),type:"text",size:"small",onClick:()=>{s(`/question/edit/${n}`)},children:"编辑问卷"}),ue.jsx(T,{icon:ue.jsx(m,{}),type:"text",size:"small",onClick:()=>{s(`/question/stat/${n}`)},children:"数据统计"})]})}),ue.jsx("div",{className:"flex-1 text-center",children:ue.jsxs(R,{children:[ue.jsx(T,{type:"text",icon:ue.jsx(i,{}),color:"#999",size:"small",onClick:f,disabled:g,children:h?"取消标星":"标星"}),ue.jsx(M,{title:"确定复制该问卷?",okText:"确认",cancelText:"取消",onConfirm:v,children:ue.jsx(T,{type:"text",icon:ue.jsx(u,{}),color:"#999",size:"small",disabled:y,children:"复制"})}),ue.jsx(T,{type:"text",icon:ue.jsx(o,{}),size:"small",color:"#999",onClick:()=>{ps({title:"确定删除该问卷?",icon:ue.jsx(x,{}),onOk:C})},disabled:S,children:"删除"})]})})]})]})},{Search:js}=O,gs=()=>{const e=E(),{pathname:s}=_(),[n,a]=t.useState(""),[r]=N();return t.useEffect((()=>{const e=r.get(We)||"";a(e)}),[r]),ue.jsx(js,{placeholder:"请输入关键字",value:n,onChange:function(e){a(e.target.value)},onSearch:function(t){e({pathname:s,search:`${We}=${t}`})},className:"w-50"})},{Title:fs}=A,ys=()=>{const[e,s]=t.useState(!1),[n,a]=t.useState(1),[r,c]=t.useState([]),[i,o]=t.useState(0),l=i>r.length,[d]=N(),m=d.get(We)||"";t.useEffect((()=>{s(!1),a(1),c([]),o(0)}),[m]);const{run:u,loading:x}=Z((async()=>await Xe({page:n,pageSize:10,keyword:m})),{manual:!0,onSuccess(e){const{list:s=[],total:t=0}=e;c(r.concat(s)),o(t),a(n+1)}}),p=t.useRef(null),{run:h}=ee((()=>{const e=p.current;if(null==e)return;const t=e.getBoundingClientRect();if(null==t)return;const{bottom:n}=t;n<=document.body.clientHeight&&(u(),s(!0))}),{wait:1e3});t.useEffect((()=>{h()}),[d]),t.useEffect((()=>(l&&window.addEventListener("scroll",h),()=>{window.removeEventListener("scroll",h)})),[d,l]);const j=t.useMemo((()=>!e||x?ue.jsx(D,{}):0===i?ue.jsx(V,{description:"暂无数据"}):l?ue.jsx("span",{children:"开始加载下一页"}):ue.jsx("span",{children:"没有更多了..."})),[e,x,l]);return ue.jsxs(ue.Fragment,{children:[ue.jsxs("div",{className:"flex",children:[ue.jsx("div",{className:"flex-1",children:ue.jsx(fs,{level:3,children:"我的问卷"})}),ue.jsx("div",{className:"flex-1 text-center",children:ue.jsx(gs,{})})]}),ue.jsx("div",{className:"mb-5",children:r.length>0&&r.map((e=>{const{_id:s}=e;return ue.jsx(hs,{...e},s)}))}),ue.jsx("div",{className:"text-center color-blue",children:ue.jsx("div",{ref:p,children:j})})]})},vs=e=>{const{total:s}=e,[n,a]=t.useState(1),[r,c]=t.useState(10),[i]=N();t.useEffect((()=>{const e=parseInt(i.get(Ve)||"")||1;a(e);const s=parseInt(i.get(Ke)||"")||10;c(s)}),[i]);const o=E(),{pathname:l}=_();return ue.jsx(K,{current:n,pageSize:r,total:s,onChange:(e,s)=>{i.set(Ve,e.toString()),i.set(Ke,s.toString()),o({pathname:l,search:i.toString()})}})},{Title:bs}=A,{confirm:ws}=W,Ss=()=>{se("问卷调查");const{data:e={},loading:s,refresh:n}=ss({isDeleted:!0}),{list:a=[],total:r=0}=e,[c,i]=t.useState([]),o=[{title:"标题",dataIndex:"title"},{title:"是否发布",dataIndex:"isPublished",render:e=>e?ue.jsx(B,{color:"processing",children:"已发布"}):ue.jsx(B,{children:"未发布"})},{title:"答卷",dataIndex:"answerCount"},{title:"创建时间",dataIndex:"createdAt"}],{run:l}=Z((async()=>{for await(const e of c)await Ze(e,{isDeleted:!1})}),{manual:!0,debounceWait:500,onSuccess(){q.success("恢复成功"),n(),i([])}}),{run:d}=Z((async()=>await async function(e){return await Ge.delete("/api/question",{data:{ids:e}})}(c)),{manual:!0,onSuccess(){q.success("删除成功"),n(),i([])}});return ue.jsxs(ue.Fragment,{children:[ue.jsxs("div",{className:"flex",children:[ue.jsx("div",{className:"flex-1",children:ue.jsx(bs,{level:3,children:"回收站"})}),ue.jsx("div",{className:"flex-1 text-center",children:ue.jsx(gs,{})})]}),ue.jsxs("div",{className:"mb-5",children:[s&&ue.jsx("div",{className:"text-center",children:ue.jsx(D,{})}),!s&&0===a.length&&ue.jsx(V,{description:"暂无数据"}),a.length>0&&ue.jsxs("div",{children:[ue.jsxs(R,{className:"mb",children:[ue.jsx(T,{type:"primary",disabled:0===c.length,onClick:l,children:"恢复"}),ue.jsx(T,{danger:!0,disabled:0===c.length,onClick:()=>{ws({title:"确定彻底删除该问卷?",icon:ue.jsx(x,{}),content:"删除以后不可撤回",onOk:d})},children:"彻底删除"})]}),ue.jsx(G,{rowKey:e=>e._id,dataSource:a,columns:o,pagination:!1,rowSelection:{type:"checkbox",onChange:e=>{i(e)}}})]})]}),ue.jsx("div",{className:"text-center color-blue",children:a.length>0&&ue.jsx(vs,{total:r})})]})},{Title:Cs}=A,ks=()=>{const{data:e={},loading:s}=ss({isStar:!0}),{list:t=[],total:n=0}=e;return ue.jsxs(ue.Fragment,{children:[ue.jsxs("div",{className:"flex",children:[ue.jsx("div",{className:"flex-1",children:ue.jsx(Cs,{level:3,children:"星标问卷"})}),ue.jsx("div",{className:"flex-1 text-center",children:ue.jsx(gs,{})})]}),ue.jsxs("div",{className:"mb-5",children:[s&&ue.jsx("div",{className:"text-center",children:ue.jsx(D,{})}),!s&&0===t.length&&ue.jsx(V,{description:"暂无数据"}),t.length>0&&t.map((e=>{const{_id:s}=e;return ue.jsx(hs,{...e},s)}))]}),ue.jsx("div",{className:"text-center color-blue",children:t.length>0&&ue.jsx(vs,{total:n})})]})},{Title:Is,Paragraph:Ns}=A,_s=()=>{const e=E();return ue.jsx("div",{className:"h-150 flex flex-col items-center justify-center",children:ue.jsxs("div",{className:"text-center",children:[ue.jsx(Is,{children:"问卷调查 | 在线投票"}),ue.jsx(Ns,{children:"已经累计创建问卷 500 份，发布问卷 80 份，收到答卷 2000 份"}),ue.jsx("div",{className:"h-15 font-24",children:ue.jsx(T,{className:"b-rounded-4",type:"primary",onClick:()=>e(Us),children:"开始使用"})})]})})},{Title:Es}=A,Ls="USERNAME",Ps="PASSWORD",Fs=()=>{const e=E(),s=g(),[n]=U.useForm();t.useEffect((()=>{const{username:e,password:s}={username:localStorage.getItem(Ls),password:localStorage.getItem(Ps)};n.setFieldsValue({username:e,password:s})}),[]);const{run:a}=Z((async(e,t)=>{const n=await async function(e,s){const t={username:e,password:s};return await Ge.post("/api/user/login",t)}(e,t);return n.token&&s(fe({username:e,nickname:e})),n}),{manual:!0,onSuccess(s){const{token:t=""}=s;!function(e){localStorage.setItem(Ye,e)}(t),q.success("登录成功"),e(Us)}});return ue.jsxs("div",{className:"flex flex-col items-center justify-center bg-white",children:[ue.jsx("div",{children:ue.jsxs(R,{children:[ue.jsx(Es,{level:2,children:ue.jsx(l,{})}),ue.jsx(Es,{level:2,children:"登录"})]})}),ue.jsx("div",{children:ue.jsxs(U,{labelCol:{span:6},wrapperCol:{span:16},onFinish:e=>{const{username:s,password:t,remember:n}=e||{};a(s,t),n?function(e,s){localStorage.setItem(Ls,e),localStorage.setItem(Ps,s)}(s,t):(localStorage.removeItem(Ls),localStorage.removeItem(Ps))},children:[ue.jsx(U.Item,{label:"用户名",name:"username",rules:[{required:!0,message:"请输入用户名"},{type:"string",min:5,max:20,message:"字符长度在 5-20 之间"},{pattern:/^\w+$/,message:"只能所字符下划线"}],children:ue.jsx(O,{})}),ue.jsx(U.Item,{label:"密码",name:"password",rules:[{required:!0,message:"请输入密码"}],children:ue.jsx(O.Password,{})}),ue.jsx(U.Item,{name:"remember",valuePropName:"checked",wrapperCol:{offset:0,span:10},children:ue.jsx(Y,{children:"记住我"})}),ue.jsx(U.Item,{wrapperCol:{offset:4,span:18},children:ue.jsxs(R,{children:[ue.jsx(T,{type:"primary",htmlType:"submit",children:"登录"}),ue.jsx(I,{to:$s,children:"注册新用户"})]})})]})})]})},Rs=t.lazy((()=>Be((()=>s.import("./index-legacy-1f3790ef.js"))))),qs=t.lazy((()=>Be((()=>s.import("./index-legacy-f21cd264.js"))))),Ts=P([{path:"/",element:ue.jsx(os,{}),children:[{path:"/",element:ue.jsx(_s,{})},{path:"login",element:ue.jsx(Fs,{})},{path:"register",element:ue.jsx(us,{})},{path:"manage",element:ue.jsx(ls,{}),children:[{path:"list",element:ue.jsx(ys,{})},{path:"star",element:ue.jsx(ks,{})},{path:"trash",element:ue.jsx(Ss,{})}]},{path:"*",element:ue.jsx(xs,{})}]},{path:"question",element:ue.jsx(ds,{}),children:[{path:"edit/:id",element:ue.jsx(Rs,{})},{path:"stat/:id",element:ue.jsx(qs,{})}]}],{basename:"/survey-sage"}),zs="/",Ds="/login",$s="/register",Us="/manage/list",Os=()=>ue.jsx(J,{theme:{algorithm:Q.defaultAlgorithm},children:ue.jsx(F,{router:Ts})});xe.createRoot(document.getElementById("root")).render(ue.jsx(p.StrictMode,{children:ue.jsx(f,{store:He,children:ue.jsx(Os,{})})}))}}}));
