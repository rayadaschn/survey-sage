function e(){import.meta.url,import("_").catch((()=>1))}import{r as s,af as t,ag as n,U as a,M as r,ah as o,ai as i,aj as c,ad as l,ak as d,ae as m,al as u,R as x}from"./@ant-design/icons-8d84517b.js";import{r as p}from"./@dnd-kit/core-0365c8c8.js";import{u as h,a as j,P as f}from"./react-redux-f2c040a7.js";import{c as g,p as y,a as v}from"./@reduxjs/toolkit-ecf8b8f6.js";import{a as w}from"./@dnd-kit/sortable-bbe48c8b.js";import{c as S}from"./lodash-es-34fbd7b9.js";import{C,D as b}from"./redux-undo-58253284.js";import{L as k,u as I,a as N,b as _,O as E,c as P,R as L}from"./react-router-dom-68488153.js";import{S as F,m as R,B as T,L as q,a as O,D,F as z,I as A,T as U,R as H,b as B,P as M,M as W,E as V,c as $,d as K,C as G,e as Y,t as J}from"./antd-41055c6a.js";import{a as Q}from"./axios-83bdef92.js";import{F as X,G as Z,H as ee}from"./ahooks-4a9cec88.js";import"./@dnd-kit/utilities-cf8ac1fd.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)})).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();var se={exports:{}},te={},ne=s,ae=Symbol.for("react.element"),re=Symbol.for("react.fragment"),oe=Object.prototype.hasOwnProperty,ie=ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ce={key:!0,ref:!0,__self:!0,__source:!0};function le(e,s,t){var n,a={},r=null,o=null;for(n in void 0!==t&&(r=""+t),void 0!==s.key&&(r=""+s.key),void 0!==s.ref&&(o=s.ref),s)oe.call(s,n)&&!ce.hasOwnProperty(n)&&(a[n]=s[n]);if(e&&e.defaultProps)for(n in s=e.defaultProps)void 0===a[n]&&(a[n]=s[n]);return{$$typeof:ae,type:e,key:r,ref:o,props:a,_owner:ie.current}}te.Fragment=re,te.jsx=le,te.jsxs=le,se.exports=te;var de=se.exports;var me={},ue=p;me.createRoot=ue.createRoot,me.hydrateRoot=ue.hydrateRoot;const xe={username:"",nickname:""},pe=g({name:"user",initialState:xe,reducers:{loginReducer:(e,s)=>s.payload,logoutReducer:()=>xe}}),he=pe.reducer,{loginReducer:je,logoutReducer:fe}=pe.actions,ge=g({name:"pageInfo",initialState:{title:"",desc:"",js:"",css:""},reducers:{resetPageInfo:(e,s)=>s.payload,changePageTitle:y(((e,s)=>{e.title=s.payload}))}}),ye=ge.reducer,{resetPageInfo:ve,changePageTitle:we}=ge.actions;let Se=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,s)=>e+=(s&=63)<36?s.toString(36):s<62?(s-26).toString(36).toUpperCase():s>62?"-":"_"),"");const Ce=g({name:"components",initialState:{componentList:[],selectedId:"",copiedComponent:null},reducers:{resetComponents:(e,s)=>s.payload,changeSelectedId:y(((e,s)=>{e.selectedId=s.payload})),addComponent:y(((e,s)=>{ke(e,s.payload)})),changeComponentProps:y(((e,s)=>{const{fe_id:t,newProps:n}=s.payload,a=e.componentList.find((e=>e.fe_id===t));a&&(a.props={...a.props,...n})})),removeSelectedComponent:y((e=>{const{componentList:s=[],selectedId:t}=e,n=be(t,s);e.selectedId=n;const a=s.findIndex((e=>e.fe_id===t));s.splice(a,1)})),changeComponentHidden:y(((e,s)=>{const{componentList:t=[]}=e,{fe_id:n,isHidden:a}=s.payload;let r="";r=a?be(n,t):n,e.selectedId=r;const o=t.find((e=>e.fe_id===n));o&&(o.isHidden=a)})),toggleComponentLocked:y(((e,s)=>{const{fe_id:t}=s.payload,n=e.componentList.find((e=>e.fe_id===t));n&&(n.isLocked=!n.isLocked)})),copySelectedComponent:y((e=>{const{selectedId:s,componentList:t=[]}=e,n=t.find((e=>e.fe_id===s));null!=n&&(e.copiedComponent=S(n))})),pasteCopiedComponent:y((e=>{const{copiedComponent:s}=e;null!=s&&(s.fe_id=Se(),ke(e,s))})),selectPrevComponent:y((e=>{const{selectedId:s,componentList:t}=e,n=t.findIndex((e=>e.fe_id===s));n<0||n<=0||(e.selectedId=t[n-1].fe_id)})),selectNextComponent:y((e=>{const{selectedId:s,componentList:t}=e,n=t.findIndex((e=>e.fe_id===s));n<0||n+1!==t.length&&(e.selectedId=t[n+1].fe_id)})),changeComponentTitle:y(((e,s)=>{const{title:t,fe_id:n}=s.payload,a=e.componentList.find((e=>e.fe_id===n));a&&(a.title=t)})),moveComponent:y(((e,s)=>{const{componentList:t}=e,{oldIndex:n,newIndex:a}=s.payload;e.componentList=w(t,n,a)}))}});function be(e,s){const t=s.filter((e=>!e.isHidden)),n=t.findIndex((s=>s.fe_id===e));if(n<0)return"";let a="";const r=t.length;return a=r<=1?"":n+1===r?t[n-1].fe_id:t[n+1].fe_id,a}function ke(e,s){const{selectedId:t,componentList:n}=e,a=n.findIndex((e=>e.fe_id===t));a<0?e.componentList.push(s):e.componentList.splice(a+1,0,s),e.selectedId=s.fe_id}const{resetComponents:Ie,changeSelectedId:Ne,addComponent:_e,changeComponentProps:Ee,removeSelectedComponent:Pe,changeComponentHidden:Le,toggleComponentLocked:Fe,copySelectedComponent:Re,pasteCopiedComponent:Te,selectPrevComponent:qe,selectNextComponent:Oe,changeComponentTitle:De,moveComponent:ze}=Ce.actions,Ae=v({reducer:{user:he,pageInfo:ye,components:C(Ce.reducer,{limit:20,filter:b(["components/resetComponents","components/changeSelectedId","components/selectPrevComponent","components/selectNextComponent"])})}}),Ue={},He=function(e,s,t){if(!s||0===s.length)return e();const n=document.getElementsByTagName("link");return Promise.all(s.map((e=>{if((e=function(e){return"/survey-sage/"+e}(e))in Ue)return;Ue[e]=!0;const s=e.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(!!t)for(let t=n.length-1;t>=0;t--){const a=n[t];if(a.href===e&&(!s||"stylesheet"===a.rel))return}else if(document.querySelector('link[href="'.concat(e,'"]').concat(a)))return;const r=document.createElement("link");return r.rel=s?"stylesheet":"modulepreload",s||(r.as="script",r.crossOrigin=""),r.href=e,document.head.appendChild(r),s?new Promise(((s,t)=>{r.addEventListener("load",s),r.addEventListener("error",(()=>t(new Error("Unable to preload CSS for ".concat(e)))))})):void 0}))).then((()=>e())).catch((e=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=e,window.dispatchEvent(s),!s.defaultPrevented)throw e}))},Be=()=>de.jsx("div",{children:de.jsx(k,{to:"/",children:de.jsx(F,{children:de.jsxs("div",{className:"text-7 color-white",children:[de.jsx(t,{}),de.jsx("span",{children:"问卷调查"})]})})})}),Me="keyword",We="page",Ve="pageSize",$e=10,Ke=["#FF2D2D","#BE77FF","#2894FF","#00EC00","#EAC100","#FF9D6F"],Ge=Q.create({timeout:1e4,baseURL:"https://huy.wiki:3002/"});Ge.interceptors.request.use((e=>(e.headers.Authorization="Bearer ".concat(localStorage.getItem(Ye)||""),e)),(e=>(R.error(e.message),Promise.reject(e)))),Ge.interceptors.response.use((e=>{const s=e.data||{},{errno:t,data:n,msg:a}=s;return 203===t||0!==t&&200!==t?(R.error(a||"请求失败"),Promise.reject(n)):n}),(e=>{var s;let t="";switch(null==(s=e.response)?void 0:s.status){case 401:t="token 失效，请重新登录";break;case 403:t="拒绝访问";break;case 404:t="请求地址错误";break;case 500:t="服务器故障";break;default:t="网络连接故障"}return R.error(t),Promise.reject(e)}));const Ye="USER_TOKEN";function Je(){const{username:e,nickname:s}=h((e=>e.user));return{username:e,nickname:s}}async function Qe(e){const s="/api/question/".concat(e);return await Ge.get(s)}async function Xe(){return await Ge.post("/api/question/")}async function Ze(e={}){return await Ge.get("/api/question",{params:e})}async function es(e,s){const t="/api/question/".concat(e);return await Ge.patch(t,s)}async function ss(){return await Ge.get("/api/user/info")}function ts(e={}){const{isStar:s,isDeleted:t}=e,[n]=I(),{data:a,loading:r,error:o,refresh:i}=X((async()=>{const e=n.get(Me)||"",a=parseInt(n.get(We)||"")||1,r=parseInt(n.get(Ve)||"")||10;return await Ze({keyword:e,isStar:s,isDeleted:t,page:a,pageSize:r})}),{refreshDeps:[n]});return{data:a,loading:r,error:o,refresh:i}}function ns(){const e=j(),[t,n]=s.useState(!0),{run:a}=X(ss,{manual:!0,onSuccess(s){const{username:t,nickname:n}=s;e(je({username:t,nickname:n}))},onFinally(){n(!1)}}),{username:r}=Je();return s.useEffect((()=>{r?n(!1):a()}),[t]),{waitingUserData:t}}function as(e){const{username:t}=Je(),{pathname:n}=N(),a=_();s.useEffect((()=>{e||(t?function(e){return[zs,As].includes(e)}(n)&&a(Us):function(e){return[Ds,zs,As].includes(e)}(n)||a(zs))}),[e,t,n])}const rs=()=>{const e=_(),s=j(),{username:t,nickname:a}=Je();const r=de.jsxs(de.Fragment,{children:[de.jsxs("span",{className:"color-light",children:[de.jsx(n,{}),a]}),de.jsx(T,{type:"link",onClick:function(){s(fe()),localStorage.removeItem(Ye),R.success("退出成功"),e(zs)},children:"退出"})]}),o=de.jsx(k,{to:zs,children:"登录"});return de.jsx(de.Fragment,{children:t?r:o})},{Header:os,Content:is,Footer:cs}=q,ls=()=>{const{waitingUserData:e}=ns();return as(e),de.jsxs(q,{children:[de.jsxs(os,{className:"px-6",children:[de.jsx("div",{className:"float-left",children:de.jsx(Be,{})}),"MainLayout header",de.jsx("div",{className:"float-right",children:de.jsx(rs,{})})]}),de.jsx(is,{className:"min-h-[calc(100vh-140px)]",children:e?de.jsx("div",{className:"mt-15 text-center",children:de.jsx(O,{})}):de.jsx(E,{})}),de.jsx(cs,{className:"border-t border-gray-200 border-solid bg-white text-center",children:"问卷调查 ©2025 - present. Created by Huy"})]})},ds=()=>{const e=_(),{pathname:s}=N(),{loading:t,run:n}=X(Xe,{manual:!0,onSuccess(s){e("question/edit/".concat(s.id)),R.success("创建成功")}});return de.jsxs("div",{className:"mx-auto my-0 w-300 flex py-6",children:[de.jsx("div",{className:"w-30",children:de.jsxs(F,{direction:"vertical",children:[de.jsx(T,{type:"primary",size:"large",icon:de.jsx(a,{}),onClick:n,disabled:t,children:"新建问卷"}),de.jsx(D,{}),de.jsx(T,{type:s.startsWith("/manage/list")?"default":"text",size:"large",icon:de.jsx(r,{}),onClick:()=>e("/manage/list"),children:"我的问卷"}),de.jsx(T,{type:s.startsWith("/manage/star")?"default":"text",size:"large",icon:de.jsx(o,{}),onClick:()=>e("/manage/star"),children:"星标问卷"}),de.jsx(T,{type:s.startsWith("/manage/trash")?"default":"text",size:"large",icon:de.jsx(i,{}),onClick:()=>e("/manage/trash"),children:"回收站"})]})}),de.jsx("div",{className:"ml-15 flex-1",children:de.jsx(E,{})})]})},ms=()=>{const{waitingUserData:e}=ns();return as(e),de.jsx("div",{className:"h-screen",children:e?de.jsx("div",{className:"mt-15 text-center",children:de.jsx(O,{})}):de.jsx(E,{})})},{Title:us}=U,xs=()=>{const e=_(),{run:s}=X((async e=>{const{username:s,password:t,nickname:n}=e;await async function(e,s,t){const n={username:e,password:s,nickname:t||e};return await Ge.post("/api/user/register",n)}(s,t,n)}),{manual:!0,onSuccess(){R.success("注册成功"),e(zs)}});return de.jsxs("div",{className:"flex flex-col items-center justify-center bg-white",children:[de.jsx("div",{children:de.jsxs(F,{children:[de.jsx(us,{level:2,children:de.jsx(c,{})}),de.jsx(us,{level:2,children:"注册新用户"})]})}),de.jsx("div",{children:de.jsxs(z,{labelCol:{span:6},wrapperCol:{span:16},onFinish:e=>{s(e)},children:[de.jsx(z.Item,{label:"用户名",name:"username",rules:[{required:!0,message:"请输入用户名"},{type:"string",min:5,max:20,message:"字符长度在 5-20 之间"},{pattern:/^\w+$/,message:"只能所字符下划线"}],children:de.jsx(A,{})}),de.jsx(z.Item,{label:"密码",name:"password",rules:[{required:!0,message:"请输入密码"}],children:de.jsx(A.Password,{})}),de.jsx(z.Item,{label:"确认密码",name:" confirm",rules:[{required:!0,message:"请输入密码"},({getFieldValue:e})=>({validator:(s,t)=>t&&e("password")!==t?Promise.reject(new Error("两次密码不一致")):Promise.resolve()})],children:de.jsx(A.Password,{})}),de.jsx(z.Item,{label:"昵称",name:"nickname",children:de.jsx(A,{})}),de.jsx(z.Item,{wrapperCol:{offset:4,span:18},children:de.jsxs(F,{children:[de.jsx(T,{type:"primary",htmlType:"submit",children:"注册"}),de.jsx(k,{to:zs,children:"已有账户，请登录"})]})})]})})]})},ps=()=>{const e=_();return de.jsx(de.Fragment,{children:de.jsx(H,{status:"404",title:"404",subTitle:"抱歉，您访问的页面不存在",extra:de.jsx(T,{type:"primary",onClick:()=>e(Us),children:"返回首页"})})})},{confirm:hs}=W,js=e=>{const t=_(),{_id:n,title:a,isPublished:r,answerContent:c,currentAt:x,isStar:p}=e,[h,j]=s.useState(p),{loading:f,run:g}=X((async()=>{await es(n,{isStar:!h})}),{manual:!0,onSuccess(){j(!h),R.success("已更新")}}),{loading:y,run:v}=X((async()=>await async function(e){const s="/api/question/duplicate/".concat(e);return await Ge.post(s)}(n)),{manual:!0,onSuccess(e){R.success("复制成功"),t("/question/edit/".concat(e.id))}}),[w,S]=s.useState(!1),{loading:C,run:b}=X((async()=>await es(n,{isDeleted:!0})),{manual:!0,onSuccess(){R.success("删除成功"),S(!0)}});return w?null:de.jsxs("div",{className:"mb-2.5 border-rounded bg-white p-3 transition-transform hover:scale-105 hover:transform hover:shadow-md",children:[de.jsxs("div",{className:"flex",children:[de.jsx("div",{className:"flex-1",children:de.jsx(k,{to:r?"/question/stat/".concat(n):"/question/edit/".concat(n),children:de.jsxs(F,{children:[p&&de.jsx(o,{style:{color:"red"}}),a]})})}),de.jsx("div",{className:"flex-1 text-center font-size-3",children:de.jsxs(F,{children:[r?de.jsx(B,{color:"processing",children:"已发布"}):de.jsx(B,{children:"未发布"}),de.jsxs("span",{children:["答卷: ",c]}),de.jsx("span",{children:x})]})})]}),de.jsx(D,{className:"m-3"}),de.jsxs("div",{className:"flex",children:[de.jsx("div",{className:"flex-1",children:de.jsxs(F,{children:[de.jsx(T,{icon:de.jsx(l,{}),type:"text",size:"small",onClick:()=>{t("/question/edit/".concat(n))},children:"编辑问卷"}),de.jsx(T,{icon:de.jsx(d,{}),type:"text",size:"small",onClick:()=>{t("/question/stat/".concat(n))},children:"数据统计"})]})}),de.jsx("div",{className:"flex-1 text-center",children:de.jsxs(F,{children:[de.jsx(T,{type:"text",icon:de.jsx(o,{}),color:"#999",size:"small",onClick:g,disabled:f,children:h?"取消标星":"标星"}),de.jsx(M,{title:"确定复制该问卷?",okText:"确认",cancelText:"取消",onConfirm:v,children:de.jsx(T,{type:"text",icon:de.jsx(m,{}),color:"#999",size:"small",disabled:y,children:"复制"})}),de.jsx(T,{type:"text",icon:de.jsx(i,{}),size:"small",color:"#999",onClick:()=>{hs({title:"确定删除该问卷?",icon:de.jsx(u,{}),onOk:b})},disabled:C,children:"删除"})]})})]})]})},{Search:fs}=A,gs=()=>{const e=_(),{pathname:t}=N(),[n,a]=s.useState("");const[r]=I();return s.useEffect((()=>{const e=r.get(Me)||"";a(e)}),[r]),de.jsx(fs,{placeholder:"请输入关键字",value:n,onChange:function(e){a(e.target.value)},onSearch:function(s){e({pathname:t,search:"".concat(Me,"=").concat(s)})},className:"w-50"})},{Title:ys}=U,vs=()=>{const[e,t]=s.useState(!1),[n,a]=s.useState(1),[r,o]=s.useState([]),[i,c]=s.useState(0),l=i>r.length,[d]=I(),m=d.get(Me)||"";s.useEffect((()=>{t(!1),a(1),o([]),c(0)}),[m]);const{run:u,loading:x}=X((async()=>await Ze({page:n,pageSize:10,keyword:m})),{manual:!0,onSuccess(e){const{list:s=[],total:t=0}=e;o(r.concat(s)),c(t),a(n+1)}}),p=s.useRef(null),{run:h}=Z((()=>{const e=p.current;if(null==e)return;const s=e.getBoundingClientRect();if(null==s)return;const{bottom:n}=s;n<=document.body.clientHeight&&(u(),t(!0))}),{wait:1e3});s.useEffect((()=>{h()}),[d]),s.useEffect((()=>(l&&window.addEventListener("scroll",h),()=>{window.removeEventListener("scroll",h)})),[d,l]);const j=s.useMemo((()=>!e||x?de.jsx(O,{}):0===i?de.jsx(V,{description:"暂无数据"}):l?de.jsx("span",{children:"开始加载下一页"}):de.jsx("span",{children:"没有更多了..."})),[e,x,l]);return de.jsxs(de.Fragment,{children:[de.jsxs("div",{className:"flex",children:[de.jsx("div",{className:"flex-1",children:de.jsx(ys,{level:3,children:"我的问卷"})}),de.jsx("div",{className:"flex-1 text-center",children:de.jsx(gs,{})})]}),de.jsx("div",{className:"mb-5",children:r.length>0&&r.map((e=>{const{_id:s}=e;return de.jsx(js,{...e},s)}))}),de.jsx("div",{className:"text-center color-blue",children:de.jsx("div",{ref:p,children:j})})]})},ws=e=>{const{total:t}=e,[n,a]=s.useState(1),[r,o]=s.useState(10),[i]=I();s.useEffect((()=>{const e=parseInt(i.get(We)||"")||1;a(e);const s=parseInt(i.get(Ve)||"")||10;o(s)}),[i]);const c=_(),{pathname:l}=N();return de.jsx($,{current:n,pageSize:r,total:t,onChange:(e,s)=>{i.set(We,e.toString()),i.set(Ve,s.toString()),c({pathname:l,search:i.toString()})}})},{Title:Ss}=U,{confirm:Cs}=W,bs=()=>{ee("问卷调查");const{data:e={},loading:t,refresh:n}=ts({isDeleted:!0}),{list:a=[],total:r=0}=e,[o,i]=s.useState([]),c=[{title:"标题",dataIndex:"title"},{title:"是否发布",dataIndex:"isPublished",render:e=>e?de.jsx(B,{color:"processing",children:"已发布"}):de.jsx(B,{children:"未发布"})},{title:"答卷",dataIndex:"answerCount"},{title:"创建时间",dataIndex:"createdAt"}],{run:l}=X((async()=>{for await(const e of o)await es(e,{isDeleted:!1})}),{manual:!0,debounceWait:500,onSuccess(){R.success("恢复成功"),n(),i([])}}),{run:d}=X((async()=>await async function(e){return await Ge.delete("/api/question",{data:{ids:e}})}(o)),{manual:!0,onSuccess(){R.success("删除成功"),n(),i([])}});return de.jsxs(de.Fragment,{children:[de.jsxs("div",{className:"flex",children:[de.jsx("div",{className:"flex-1",children:de.jsx(Ss,{level:3,children:"回收站"})}),de.jsx("div",{className:"flex-1 text-center",children:de.jsx(gs,{})})]}),de.jsxs("div",{className:"mb-5",children:[t&&de.jsx("div",{className:"text-center",children:de.jsx(O,{})}),!t&&0===a.length&&de.jsx(V,{description:"暂无数据"}),a.length>0&&de.jsxs("div",{children:[de.jsxs(F,{className:"mb",children:[de.jsx(T,{type:"primary",disabled:0===o.length,onClick:l,children:"恢复"}),de.jsx(T,{danger:!0,disabled:0===o.length,onClick:()=>{Cs({title:"确定彻底删除该问卷?",icon:de.jsx(u,{}),content:"删除以后不可撤回",onOk:d})},children:"彻底删除"})]}),de.jsx(K,{rowKey:e=>e._id,dataSource:a,columns:c,pagination:!1,rowSelection:{type:"checkbox",onChange:e=>{i(e)}}})]})]}),de.jsx("div",{className:"text-center color-blue",children:a.length>0&&de.jsx(ws,{total:r})})]})},{Title:ks}=U,Is=()=>{const{data:e={},loading:s}=ts({isStar:!0}),{list:t=[],total:n=0}=e;return de.jsxs(de.Fragment,{children:[de.jsxs("div",{className:"flex",children:[de.jsx("div",{className:"flex-1",children:de.jsx(ks,{level:3,children:"星标问卷"})}),de.jsx("div",{className:"flex-1 text-center",children:de.jsx(gs,{})})]}),de.jsxs("div",{className:"mb-5",children:[s&&de.jsx("div",{className:"text-center",children:de.jsx(O,{})}),!s&&0===t.length&&de.jsx(V,{description:"暂无数据"}),t.length>0&&t.map((e=>{const{_id:s}=e;return de.jsx(js,{...e},s)}))]}),de.jsx("div",{className:"text-center color-blue",children:t.length>0&&de.jsx(ws,{total:n})})]})},{Title:Ns,Paragraph:_s}=U,Es=()=>{const e=_();return de.jsx("div",{className:"h-150 flex flex-col items-center justify-center",children:de.jsxs("div",{className:"text-center",children:[de.jsx(Ns,{children:"问卷调查 | 在线投票"}),de.jsx(_s,{children:"已经累计创建问卷 500 份，发布问卷 80 份，收到答卷 2000 份"}),de.jsx("div",{className:"h-15 font-24",children:de.jsx(T,{className:"b-rounded-4",type:"primary",onClick:()=>e(Us),children:"开始使用"})})]})})},{Title:Ps}=U,Ls="USERNAME",Fs="PASSWORD";const Rs=()=>{const e=_(),t=j(),[n]=z.useForm();s.useEffect((()=>{const{username:e,password:s}={username:localStorage.getItem(Ls),password:localStorage.getItem(Fs)};n.setFieldsValue({username:e,password:s})}),[]);const{run:a}=X((async(e,s)=>{const n=await async function(e,s){const t={username:e,password:s};return await Ge.post("/api/user/login",t)}(e,s);return n.token&&t(je({username:e,nickname:e})),n}),{manual:!0,onSuccess(s){const{token:t=""}=s;!function(e){localStorage.setItem(Ye,e)}(t),R.success("登录成功"),e(Us)}});return de.jsxs("div",{className:"flex flex-col items-center justify-center bg-white",children:[de.jsx("div",{children:de.jsxs(F,{children:[de.jsx(Ps,{level:2,children:de.jsx(c,{})}),de.jsx(Ps,{level:2,children:"登录"})]})}),de.jsx("div",{children:de.jsxs(z,{labelCol:{span:6},wrapperCol:{span:16},onFinish:e=>{const{username:s,password:t,remember:n}=e||{};a(s,t),n?function(e,s){localStorage.setItem(Ls,e),localStorage.setItem(Fs,s)}(s,t):(localStorage.removeItem(Ls),localStorage.removeItem(Fs))},children:[de.jsx(z.Item,{label:"用户名",name:"username",rules:[{required:!0,message:"请输入用户名"},{type:"string",min:5,max:20,message:"字符长度在 5-20 之间"},{pattern:/^\w+$/,message:"只能所字符下划线"}],children:de.jsx(A,{})}),de.jsx(z.Item,{label:"密码",name:"password",rules:[{required:!0,message:"请输入密码"}],children:de.jsx(A.Password,{})}),de.jsx(z.Item,{name:"remember",valuePropName:"checked",wrapperCol:{offset:0,span:10},children:de.jsx(G,{children:"记住我"})}),de.jsx(z.Item,{wrapperCol:{offset:4,span:18},children:de.jsxs(F,{children:[de.jsx(T,{type:"primary",htmlType:"submit",children:"登录"}),de.jsx(k,{to:As,children:"注册新用户"})]})})]})})]})},Ts=s.lazy((()=>He((()=>import("./index-f60b02b2.js")),["static/js/index-f60b02b2.js","static/js/react-redux-f2c040a7.js","static/js/@dnd-kit/core-0365c8c8.js","static/js/@ant-design/icons-8d84517b.js","static/js/@dnd-kit/utilities-cf8ac1fd.js","static/js/ahooks-4a9cec88.js","static/js/index-b0f351a5.js","static/js/react-router-dom-68488153.js","static/js/antd-41055c6a.js","static/js/recharts-62b39eab.js","static/js/redux-undo-58253284.js","static/js/@dnd-kit/sortable-bbe48c8b.js","static/js/@reduxjs/toolkit-ecf8b8f6.js","static/js/lodash-es-34fbd7b9.js","static/js/axios-83bdef92.js"]))),qs=s.lazy((()=>He((()=>import("./index-55595821.js")),["static/js/index-55595821.js","static/js/react-redux-f2c040a7.js","static/js/@dnd-kit/core-0365c8c8.js","static/js/@ant-design/icons-8d84517b.js","static/js/@dnd-kit/utilities-cf8ac1fd.js","static/js/ahooks-4a9cec88.js","static/js/index-b0f351a5.js","static/js/react-router-dom-68488153.js","static/js/antd-41055c6a.js","static/js/recharts-62b39eab.js","static/js/@reduxjs/toolkit-ecf8b8f6.js","static/js/@dnd-kit/sortable-bbe48c8b.js","static/js/lodash-es-34fbd7b9.js","static/js/redux-undo-58253284.js","static/js/axios-83bdef92.js"]))),Os=P([{path:"/",element:de.jsx(ls,{}),children:[{path:"/",element:de.jsx(Es,{})},{path:"login",element:de.jsx(Rs,{})},{path:"register",element:de.jsx(xs,{})},{path:"manage",element:de.jsx(ds,{}),children:[{path:"list",element:de.jsx(vs,{})},{path:"star",element:de.jsx(Is,{})},{path:"trash",element:de.jsx(bs,{})}]},{path:"*",element:de.jsx(ps,{})}]},{path:"question",element:de.jsx(ms,{}),children:[{path:"edit/:id",element:de.jsx(Ts,{})},{path:"stat/:id",element:de.jsx(qs,{})}]}],{basename:"/survey-sage"}),Ds="/",zs="/login",As="/register",Us="/manage/list";const Hs=()=>de.jsx(Y,{theme:{algorithm:J.defaultAlgorithm},children:de.jsx(L,{router:Os})});me.createRoot(document.getElementById("root")).render(de.jsx(x.StrictMode,{children:de.jsx(f,{store:Ae,children:de.jsx(Hs,{})})}));export{$e as S,e as __vite_legacy_guard,Oe as a,Le as b,Re as c,we as d,_e as e,Ne as f,De as g,Ee as h,ve as i,de as j,Ge as k,Ie as l,ze as m,Se as n,Qe as o,Te as p,Ke as q,Pe as r,qe as s,Fe as t,es as u};
