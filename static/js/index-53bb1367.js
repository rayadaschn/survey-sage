function e(){import.meta.url,import("_").catch((()=>1))}import{r as s,ae as t,af as n,U as r,M as a,ag as i,ah as l,ai as c,ac as o,aj as d,ad as x,ak as m,O as u,al as h,z as j,R as p}from"./@ant-design/icons-2917d48b.js";import{r as f,S as g,T as v,m as y,B as b,L as w,a as N,D as S,F as k,I as C,R as I,b as P,P as E,M as _,E as F,c as q,d as R,e as L,f as T,C as O,g as z,t as D}from"./antd-913d1fbb.js";import{u as A,a as V,P as U}from"./react-redux-9df179a4.js";import{c as M,a as B}from"./@reduxjs/toolkit-8e8d1e9e.js";import{L as W,u as K,a as $,b as H,c as J,O as Y,d as G,R as Q}from"./react-router-dom-3db0ae54.js";import{a as X}from"./axios-83bdef92.js";import{u as Z,a as ee,b as se}from"./ahooks-f2a0f853.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)})).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();var te={exports:{}},ne={},re=s,ae=Symbol.for("react.element"),ie=Symbol.for("react.fragment"),le=Object.prototype.hasOwnProperty,ce=re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,oe={key:!0,ref:!0,__self:!0,__source:!0};function de(e,s,t){var n,r={},a=null,i=null;for(n in void 0!==t&&(a=""+t),void 0!==s.key&&(a=""+s.key),void 0!==s.ref&&(i=s.ref),s)le.call(s,n)&&!oe.hasOwnProperty(n)&&(r[n]=s[n]);if(e&&e.defaultProps)for(n in s=e.defaultProps)void 0===r[n]&&(r[n]=s[n]);return{$$typeof:ae,type:e,key:a,ref:i,props:r,_owner:ce.current}}ne.Fragment=ie,ne.jsx=de,ne.jsxs=de,te.exports=ne;var xe=te.exports;var me={},ue=f;me.createRoot=ue.createRoot,me.hydrateRoot=ue.hydrateRoot;const he={username:"",nickname:""},je=M({name:"user",initialState:he,reducers:{loginReducer:(e,s)=>s.payload,logoutReducer:()=>he}}),pe=je.reducer,{loginReducer:fe,logoutReducer:ge}=je.actions,ve=M({name:"pageInfo",initialState:{title:"",desc:"",js:"",css:""},reducers:{resetPageInfo:(e,s)=>s.payload}}),ye=ve.reducer,{resetPageInfo:be}=ve.actions,we=M({name:"components",initialState:{componentList:[],selectedId:"",copiedComponent:null},reducers:{resetComponents:(e,s)=>s.payload}}),{resetComponents:Ne}=we.actions,Se=B({reducer:{user:pe,pageInfo:ye,components:we.reducer}}),ke="_container_1fxih_1",{Title:Ce}=v,Ie=()=>xe.jsx("div",{children:xe.jsx(W,{to:"/",children:xe.jsxs(g,{className:ke,children:[xe.jsx(Ce,{children:xe.jsx(t,{})}),xe.jsx(Ce,{children:"问卷调查"})]})})}),Pe="USER_TOKEN";function Ee(){const{username:e,nickname:s}=A((e=>e.user));return{username:e,nickname:s}}const _e="keyword",Fe="page",qe="pageSize",Re=X.create({timeout:1e4,baseURL:"https://huy.wiki:3002/"});async function Le(){return await Re.post("/api/question/")}async function Te(e={}){return await Re.get("/api/question",{params:e})}async function Oe(e,s){const t="/api/question/".concat(e);return await Re.patch(t,s)}async function ze(){return await Re.get("/api/user/info")}function De(){const{id:e=""}=K(),t=V(),{data:n,loading:r,error:a,run:i}=Z((async e=>{if(!e)throw new Error("缺少问卷 id");const s=await async function(e){const s="/api/question/".concat(e);return await Re.get(s)}(e);return s}),{manual:!0});return s.useEffect((()=>{if(!n)return;const{title:e="",desc:s="",js:r="",css:a="",componentList:i=[]}=n;let l="";i.length>0&&(l=i[0].fe_id),t(Ne({componentList:i,selectedId:l,copiedComponent:null})),t(be({title:e,desc:s,js:r,css:a}))}),[n]),s.useEffect((()=>{i(e)}),[e]),{loading:r,error:a}}function Ae(e={}){const{isStar:s,isDeleted:t}=e,[n]=$(),{data:r,loading:a,error:i,refresh:l}=Z((async()=>{const e=n.get(_e)||"",r=parseInt(n.get(Fe)||"")||1,a=parseInt(n.get(qe)||"")||10;return await Te({keyword:e,isStar:s,isDeleted:t,page:r,pageSize:a})}),{refreshDeps:[n]});return{data:r,loading:a,error:i,refresh:l}}function Ve(){const e=V(),[t,n]=s.useState(!0),{run:r}=Z(ze,{manual:!0,onSuccess(s){const{username:t,nickname:n}=s;e(fe({username:t,nickname:n}))},onFinally(){n(!1)}}),{username:a}=Ee();return s.useEffect((()=>{a?n(!1):r()}),[t]),{waitingUserData:t}}function Ue(e){const{username:t}=Ee(),{pathname:n}=H(),r=J();s.useEffect((()=>{e||(t?function(e){return[Rs,Ls].includes(e)}(n)&&r(Ts):function(e){return[qs,Rs,Ls].includes(e)}(n)||r(Rs))}),[e,t,n])}Re.interceptors.request.use((e=>(e.headers.Authorization="Bearer ".concat(localStorage.getItem(Pe)||""),e)),(e=>(y.error(e.message),Promise.reject(e)))),Re.interceptors.response.use((e=>{const s=e.data||{},{errno:t,data:n,msg:r}=s;return 203===t||0!==t&&200!==t?(y.error(r||"请求失败"),Promise.reject(n)):n}),(e=>{var s;let t="";switch(null==(s=e.response)?void 0:s.status){case 401:t="token 失效，请重新登录";break;case 403:t="拒绝访问";break;case 404:t="请求地址错误";break;case 500:t="服务器故障";break;default:t="网络连接故障"}return y.error(t),Promise.reject(e)}));const Me=()=>{const e=J(),s=V(),{username:t,nickname:r}=Ee();const a=xe.jsxs(xe.Fragment,{children:[xe.jsxs("span",{className:"color-light",children:[xe.jsx(n,{}),r]}),xe.jsx(b,{type:"link",onClick:function(){s(ge()),localStorage.removeItem(Pe),y.success("退出成功"),e(Rs)},children:"退出"})]}),i=xe.jsx(W,{to:Rs,children:"登录"});return xe.jsx(xe.Fragment,{children:t?a:i})},{Header:Be,Content:We,Footer:Ke}=w,$e=()=>{const{waitingUserData:e}=Ve();return Ue(e),xe.jsxs(w,{children:[xe.jsxs(Be,{className:"px-6",children:[xe.jsx("div",{className:"float-left",children:xe.jsx(Ie,{})}),"MainLayout header",xe.jsx("div",{className:"float-right",children:xe.jsx(Me,{})})]}),xe.jsx(We,{className:"min-h-[calc(100vh-140px)]",children:e?xe.jsx("div",{className:"mt-15 text-center",children:xe.jsx(N,{})}):xe.jsx(Y,{})}),xe.jsx(Ke,{className:"border-t border-gray-200 border-solid bg-white text-center",children:"问卷调查@2023 Created by Huy"})]})},He=()=>{const e=J(),{pathname:s}=H(),{loading:t,run:n}=Z(Le,{manual:!0,onSuccess(s){e("question/edit/".concat(s.id)),y.success("创建成功")}});return xe.jsxs("div",{className:"mx-auto my-0 w-300 flex py-6",children:[xe.jsx("div",{className:"w-30",children:xe.jsxs(g,{direction:"vertical",children:[xe.jsx(b,{type:"primary",size:"large",icon:xe.jsx(r,{}),onClick:n,disabled:t,children:"新建问卷"}),xe.jsx(S,{}),xe.jsx(b,{type:s.startsWith("/manage/list")?"default":"text",size:"large",icon:xe.jsx(a,{}),onClick:()=>e("/manage/list"),children:"我的问卷"}),xe.jsx(b,{type:s.startsWith("/manage/star")?"default":"text",size:"large",icon:xe.jsx(i,{}),onClick:()=>e("/manage/star"),children:"星标问卷"}),xe.jsx(b,{type:s.startsWith("/manage/trash")?"default":"text",size:"large",icon:xe.jsx(l,{}),onClick:()=>e("/manage/trash"),children:"回收站"})]})}),xe.jsx("div",{className:"ml-15 flex-1",children:xe.jsx(Y,{})})]})},Je=()=>{const{waitingUserData:e}=Ve();return Ue(e),xe.jsx("div",{className:"h-screen",children:e?xe.jsx("div",{className:"mt-15 text-center",children:xe.jsx(N,{})}):xe.jsx(Y,{})})},{Title:Ye}=v,Ge=()=>{const e=J(),{run:s}=Z((async e=>{const{username:s,password:t,nickname:n}=e;await async function(e,s,t){const n={username:e,password:s,nickname:t||e};return await Re.post("/api/user/register",n)}(s,t,n)}),{manual:!0,onSuccess(){y.success("注册成功"),e(Rs)}});return xe.jsxs("div",{className:"flex flex-col items-center justify-center bg-white",children:[xe.jsx("div",{children:xe.jsxs(g,{children:[xe.jsx(Ye,{level:2,children:xe.jsx(c,{})}),xe.jsx(Ye,{level:2,children:"注册新用户"})]})}),xe.jsx("div",{children:xe.jsxs(k,{labelCol:{span:6},wrapperCol:{span:16},onFinish:e=>{s(e)},children:[xe.jsx(k.Item,{label:"用户名",name:"username",rules:[{required:!0,message:"请输入用户名"},{type:"string",min:5,max:20,message:"字符长度在 5-20 之间"},{pattern:/^\w+$/,message:"只能所字符下划线"}],children:xe.jsx(C,{})}),xe.jsx(k.Item,{label:"密码",name:"password",rules:[{required:!0,message:"请输入密码"}],children:xe.jsx(C.Password,{})}),xe.jsx(k.Item,{label:"确认密码",name:" confirm",rules:[{required:!0,message:"请输入密码"},({getFieldValue:e})=>({validator:(s,t)=>t&&e("password")!==t?Promise.reject(new Error("两次密码不一致")):Promise.resolve()})],children:xe.jsx(C.Password,{})}),xe.jsx(k.Item,{label:"昵称",name:"nickname",children:xe.jsx(C,{})}),xe.jsx(k.Item,{wrapperCol:{offset:4,span:18},children:xe.jsxs(g,{children:[xe.jsx(b,{type:"primary",htmlType:"submit",children:"注册"}),xe.jsx(W,{to:Rs,children:"已有账户，请登录"})]})})]})})]})},Qe=()=>{const e=J();return xe.jsx(xe.Fragment,{children:xe.jsx(I,{status:"404",title:"404",subTitle:"抱歉，您访问的页面不存在",extra:xe.jsx(b,{type:"primary",onClick:()=>e(Ts),children:"返回首页"})})})},{confirm:Xe}=_,Ze=e=>{const t=J(),{_id:n,title:r,isPublished:a,answerContent:c,currentAt:u,isStar:h}=e,[j,p]=s.useState(h),{loading:f,run:v}=Z((async()=>{await Oe(n,{isStar:!j})}),{manual:!0,onSuccess(){p(!j),y.success("已更新")}}),{loading:w,run:N}=Z((async()=>await async function(e){const s="/api/question/duplicate/".concat(e);return await Re.post(s)}(n)),{manual:!0,onSuccess(e){y.success("复制成功"),t("/question/edit/".concat(e.id))}}),[k,C]=s.useState(!1),{loading:I,run:_}=Z((async()=>await Oe(n,{isDeleted:!0})),{manual:!0,onSuccess(){y.success("删除成功"),C(!0)}});return k?null:xe.jsxs("div",{className:"mb-2.5 border-rounded bg-white p-3 transition-transform hover:scale-105 hover:transform hover:shadow-md",children:[xe.jsxs("div",{className:"flex",children:[xe.jsx("div",{className:"flex-1",children:xe.jsx(W,{to:a?"/question/stat/".concat(n):"/question/edit/".concat(n),children:xe.jsxs(g,{children:[h&&xe.jsx(i,{style:{color:"red"}}),r]})})}),xe.jsx("div",{className:"flex-1 text-center font-size-3",children:xe.jsxs(g,{children:[a?xe.jsx(P,{color:"processing",children:"已发布"}):xe.jsx(P,{children:"未发布"}),xe.jsxs("span",{children:["答卷: ",c]}),xe.jsx("span",{children:u})]})})]}),xe.jsx(S,{className:"m-3"}),xe.jsxs("div",{className:"flex",children:[xe.jsx("div",{className:"flex-1",children:xe.jsxs(g,{children:[xe.jsx(b,{icon:xe.jsx(o,{}),type:"text",size:"small",onClick:()=>{t("/question/edit/".concat(n))},children:"编辑问卷"}),xe.jsx(b,{icon:xe.jsx(d,{}),type:"text",size:"small",onClick:()=>{t("/question/stat/".concat(n))},children:"数据统计"})]})}),xe.jsx("div",{className:"flex-1 text-center",children:xe.jsxs(g,{children:[xe.jsx(b,{type:"text",icon:xe.jsx(i,{}),color:"#999",size:"small",onClick:v,disabled:f,children:j?"取消标星":"标星"}),xe.jsx(E,{title:"确定复制该问卷?",okText:"确认",cancelText:"取消",onConfirm:N,children:xe.jsx(b,{type:"text",icon:xe.jsx(x,{}),color:"#999",size:"small",disabled:w,children:"复制"})}),xe.jsx(b,{type:"text",icon:xe.jsx(l,{}),size:"small",color:"#999",onClick:()=>{Xe({title:"确定删除该问卷?",icon:xe.jsx(m,{}),onOk:_})},disabled:I,children:"删除"})]})})]})]})},{Search:es}=C,ss=()=>{const e=J(),{pathname:t}=H(),[n,r]=s.useState("");const[a]=$();return s.useEffect((()=>{const e=a.get(_e)||"";r(e)}),[a]),xe.jsx(es,{placeholder:"请输入关键字",value:n,onChange:function(e){r(e.target.value)},onSearch:function(s){e({pathname:t,search:"".concat(_e,"=").concat(s)})},className:"w-50"})},{Title:ts}=v,ns=()=>{const[e,t]=s.useState(!1),[n,r]=s.useState(1),[a,i]=s.useState([]),[l,c]=s.useState(0),o=l>a.length,[d]=$(),x=d.get(_e)||"";s.useEffect((()=>{t(!1),r(1),i([]),c(0)}),[x]);const{run:m,loading:u}=Z((async()=>await Te({page:n,pageSize:10,keyword:x})),{manual:!0,onSuccess(e){const{list:s=[],total:t=0}=e;i(a.concat(s)),c(t),r(n+1)}}),h=s.useRef(null),{run:j}=ee((()=>{const e=h.current;if(null==e)return;const s=e.getBoundingClientRect();if(null==s)return;const{bottom:n}=s;n<=document.body.clientHeight&&(m(),t(!0))}),{wait:1e3});s.useEffect((()=>{j()}),[d]),s.useEffect((()=>(o&&window.addEventListener("scroll",j),()=>{window.removeEventListener("scroll",j)})),[d,o]);const p=s.useMemo((()=>!e||u?xe.jsx(N,{}):0===l?xe.jsx(F,{description:"暂无数据"}):o?xe.jsx("span",{children:"开始加载下一页"}):xe.jsx("span",{children:"没有更多了..."})),[e,u,o]);return xe.jsxs(xe.Fragment,{children:[xe.jsxs("div",{className:"flex",children:[xe.jsx("div",{className:"flex-1",children:xe.jsx(ts,{level:3,children:"我的问卷"})}),xe.jsx("div",{className:"flex-1 text-center",children:xe.jsx(ss,{})})]}),xe.jsx("div",{className:"mb-5",children:a.length>0&&a.map((e=>{const{_id:s}=e;return xe.jsx(Ze,{...e},s)}))}),xe.jsx("div",{className:"text-center color-blue",children:xe.jsx("div",{ref:h,children:p})})]})},rs=e=>{const{total:t}=e,[n,r]=s.useState(1),[a,i]=s.useState(10),[l]=$();s.useEffect((()=>{const e=parseInt(l.get(Fe)||"")||1;r(e);const s=parseInt(l.get(qe)||"")||10;i(s)}),[l]);const c=J(),{pathname:o}=H();return xe.jsx(q,{current:n,pageSize:a,total:t,onChange:(e,s)=>{l.set(Fe,e.toString()),l.set(qe,s.toString()),c({pathname:o,search:l.toString()})}})},{Title:as}=v,{confirm:is}=_,ls=()=>{se("问卷调查");const{data:e={},loading:t,refresh:n}=Ae({isDeleted:!0}),{list:r=[],total:a=0}=e,[i,l]=s.useState([]),c=[{title:"标题",dataIndex:"title"},{title:"是否发布",dataIndex:"isPublished",render:e=>e?xe.jsx(P,{color:"processing",children:"已发布"}):xe.jsx(P,{children:"未发布"})},{title:"答卷",dataIndex:"answerCount"},{title:"创建时间",dataIndex:"createdAt"}],{run:o}=Z((async()=>{for await(const e of i)await Oe(e,{isDeleted:!1})}),{manual:!0,debounceWait:500,onSuccess(){y.success("恢复成功"),n(),l([])}}),{run:d}=Z((async()=>await async function(e){return await Re.delete("/api/question",{data:{ids:e}})}(i)),{manual:!0,onSuccess(){y.success("删除成功"),n(),l([])}});return xe.jsxs(xe.Fragment,{children:[xe.jsxs("div",{className:"flex",children:[xe.jsx("div",{className:"flex-1",children:xe.jsx(as,{level:3,children:"回收站"})}),xe.jsx("div",{className:"flex-1 text-center",children:xe.jsx(ss,{})})]}),xe.jsxs("div",{className:"mb-5",children:[t&&xe.jsx("div",{className:"text-center",children:xe.jsx(N,{})}),!t&&0===r.length&&xe.jsx(F,{description:"暂无数据"}),r.length>0&&xe.jsxs("div",{children:[xe.jsxs(g,{className:"mb",children:[xe.jsx(b,{type:"primary",disabled:0===i.length,onClick:o,children:"恢复"}),xe.jsx(b,{danger:!0,disabled:0===i.length,onClick:()=>{is({title:"确定彻底删除该问卷?",icon:xe.jsx(m,{}),content:"删除以后不可撤回",onOk:d})},children:"彻底删除"})]}),xe.jsx(R,{rowKey:e=>e._id,dataSource:r,columns:c,pagination:!1,rowSelection:{type:"checkbox",onChange:e=>{l(e)}}})]})]}),xe.jsx("div",{className:"text-center color-blue",children:r.length>0&&xe.jsx(rs,{total:a})})]})},{Title:cs}=v,os=()=>{const{data:e={},loading:s}=Ae({isStar:!0}),{list:t=[],total:n=0}=e;return xe.jsxs(xe.Fragment,{children:[xe.jsxs("div",{className:"flex",children:[xe.jsx("div",{className:"flex-1",children:xe.jsx(cs,{level:3,children:"星标问卷"})}),xe.jsx("div",{className:"flex-1 text-center",children:xe.jsx(ss,{})})]}),xe.jsxs("div",{className:"mb-5",children:[s&&xe.jsx("div",{className:"text-center",children:xe.jsx(N,{})}),!s&&0===t.length&&xe.jsx(F,{description:"暂无数据"}),t.length>0&&t.map((e=>{const{_id:s}=e;return xe.jsx(Ze,{...e},s)}))]}),xe.jsx("div",{className:"text-center color-blue",children:t.length>0&&xe.jsx(rs,{total:n})})]})},ds=()=>(J(),xe.jsxs("div",{className:"mx-6 flex border-b border-green-300 bg-white",children:[xe.jsx("div",{className:"flex-1",children:xe.jsxs(g,{children:[xe.jsx(b,{type:"link",icon:xe.jsx(u,{}),children:"返回"}),xe.jsx("div",{className:"mb-0 text-[18px] leading-none",children:"标题"})]})}),xe.jsx("div",{className:"flex-1 text-center leading-[2]",children:"中部"}),xe.jsx("div",{className:"flex-1 text-center leading-[2]",children:"右侧"})]})),xs=()=>xe.jsxs(xe.Fragment,{children:[xe.jsx("div",{children:"lib"})," "]}),ms=()=>xe.jsxs(xe.Fragment,{children:[xe.jsx("div",{children:"layers"})," "]}),us=()=>{const e=[{key:"componentLib",label:xe.jsxs("span",{children:[xe.jsx(h,{}),"组件库"]}),children:xe.jsx(xs,{})},{key:"layers",label:xe.jsxs("span",{children:[xe.jsx(a,{}),"组件库"]}),children:xe.jsx(ms,{})}];return xe.jsx(xe.Fragment,{children:xe.jsx(L,{items:e,defaultActiveKey:"componentLib"})})},hs={title:"输入框标题",placeholder:"请输入..."},{Paragraph:js}=v,ps={title:"输入框",type:"questionInput",Component:e=>{const{title:s,placeholder:t}={...hs,...e};return xe.jsxs("div",{children:[xe.jsx(js,{strong:!0,children:s}),xe.jsx("div",{children:xe.jsx(C,{placeholder:t})})]})},PropComponent:e=>{const{title:t,placeholder:n,onChange:r,disabled:a}=e,[i]=k.useForm();return s.useEffect((()=>{i.setFieldsValue({title:t,placeholder:n})}),[t,n]),xe.jsxs(k,{layout:"vertical",initialValues:{title:t,placeholder:n},form:i,onValuesChange:function(){r&&r(i.getFieldsValue())},disabled:a,children:[xe.jsx(k.Item,{label:"标题",name:"title",rules:[{required:!0,message:"请输入标题"}],children:xe.jsx(C,{})}),xe.jsx(k.Item,{label:"Placeholder",name:"placeholder",children:xe.jsx(C,{})})]})},defaultProps:hs},fs={text:"一级标题",level:1,isCenter:!1},{Title:gs}=v,vs=[ps,{title:"标题",type:"questionTitle",Component:e=>{const{text:s="",level:t=1,isCenter:n=!1}={...fs};return xe.jsx(gs,{level:t,style:{textAlign:n?"center":"start",marginBottom:"0",fontSize:(r=t,1===r?"24px":2===r?"20px":"16px")},children:s});var r},PropComponent:e=>{const{text:t,level:n,isCenter:r,onChange:a,disabled:i}=e,[l]=k.useForm();return s.useEffect((()=>{l.setFieldsValue({text:t,level:n,isCenter:r})}),[t,n,r]),xe.jsxs(k,{form:l,layout:"vertical",onValuesChange:function(){a&&a(l.getFieldsValue())},initialValues:{text:t,level:n,isCenter:r},disabled:i,children:[xe.jsx(k.Item,{label:"标题内容",name:"text",rules:[{required:!0,message:"请输入标题内容"}],children:xe.jsx(C,{})}),xe.jsx(k.Item,{label:"层级",name:"level",children:xe.jsx(T,{options:[{value:1,text:1},{value:2,text:2},{value:3,text:3}]})}),xe.jsx(k.Item,{name:"isCenter",valuePropName:"checked",children:xe.jsx(O,{children:"居中显示"})})]})},defaultProps:fs}];const ys=({loading:e})=>{const{componentList:s}=function(){const e=A((e=>e.components)),{componentList:s=[]}=e;return{componentList:s}}();if(e)return xe.jsx("div",{className:"mt-6 text-center",children:xe.jsx(N,{})});const t=e=>{const{type:s,props:t}=e,n=function(e){return vs.find((s=>s.type===e))}(s);if(null==n)return null;const{Component:r}=n;return xe.jsx(r,{...t})};return xe.jsx("div",{className:"min-h-[100%] overflow-hidden bg-white",children:s.map((e=>{const{fe_id:s}=e,n=j({"m-3 border border-white rounded-sm border-solid p-3 hover:border-gray-200":!0});return xe.jsx("div",{className:n,children:xe.jsx("div",{className:"pointer-events-none",children:t(e)})},s)}))})},bs=()=>xe.jsx(xe.Fragment,{children:"EditRightPanel.tsx"}),ws=()=>{const{loading:e}=De(),{title:s}=A((e=>e.pageInfo));return se("问卷编辑 - ".concat(s)),xe.jsxs("div",{className:"h-screen flex flex-col bg-[#f0f2f5]",children:[xe.jsx(ds,{}),xe.jsx("div",{className:"flex-1 py-3",children:xe.jsxs("div",{className:"mx-6 h-100% flex",children:[xe.jsx("div",{className:"w-75 bg-white px-3",children:xe.jsx(us,{})}),xe.jsx("div",{className:"relative flex-1 overflow-hidden",children:xe.jsx("div",{className:"absolute left-1/2 top-1/2 h-178 w-150 transform items-center justify-center overflow-auto shadow-2xl -translate-x-1/2 -translate-y-1/2",children:xe.jsx(ys,{loading:e})})}),xe.jsx("div",{className:"w-75 bg-white px-3",children:xe.jsx(bs,{})})]})})]})},Ns=()=>{const{loading:e,questionData:s}=De();return xe.jsxs("div",{children:[xe.jsx("p",{children:"Stat"}),e?xe.jsx("p",{children:"loading"}):xe.jsx("p",{children:JSON.stringify(s)})]})},{Title:Ss,Paragraph:ks}=v,Cs=()=>{const e=J();return xe.jsx("div",{className:"h-150 flex flex-col items-center justify-center",children:xe.jsxs("div",{className:"text-center",children:[xe.jsx(Ss,{children:"问卷调查 | 在线投票"}),xe.jsx(ks,{children:"已经累计创建问卷 500 份，发布问卷 80 份，收到答卷 2000 份"}),xe.jsx("div",{className:"h-15 font-24",children:xe.jsx(b,{className:"b-rounded-4",type:"primary",onClick:()=>e(Ts),children:"开始使用"})})]})})},{Title:Is}=v,Ps="USERNAME",Es="PASSWORD";const _s=()=>{const e=J(),t=V(),[n]=k.useForm();s.useEffect((()=>{const{username:e,password:s}={username:localStorage.getItem(Ps),password:localStorage.getItem(Es)};n.setFieldsValue({username:e,password:s})}),[]);const{run:r}=Z((async(e,s)=>{const n=await async function(e,s){const t={username:e,password:s};return await Re.post("/api/user/login",t)}(e,s);return n.token&&t(fe({username:e,nickname:e})),n}),{manual:!0,onSuccess(s){const{token:t=""}=s;!function(e){localStorage.setItem(Pe,e)}(t),y.success("登录成功"),e(Ts)}});return xe.jsxs("div",{className:"flex flex-col items-center justify-center bg-white",children:[xe.jsx("div",{children:xe.jsxs(g,{children:[xe.jsx(Is,{level:2,children:xe.jsx(c,{})}),xe.jsx(Is,{level:2,children:"登录"})]})}),xe.jsx("div",{children:xe.jsxs(k,{labelCol:{span:6},wrapperCol:{span:16},onFinish:e=>{const{username:s,password:t,remember:n}=e||{};r(s,t),n?function(e,s){localStorage.setItem(Ps,e),localStorage.setItem(Es,s)}(s,t):(localStorage.removeItem(Ps),localStorage.removeItem(Es))},children:[xe.jsx(k.Item,{label:"用户名",name:"username",rules:[{required:!0,message:"请输入用户名"},{type:"string",min:5,max:20,message:"字符长度在 5-20 之间"},{pattern:/^\w+$/,message:"只能所字符下划线"}],children:xe.jsx(C,{})}),xe.jsx(k.Item,{label:"密码",name:"password",rules:[{required:!0,message:"请输入密码"}],children:xe.jsx(C.Password,{})}),xe.jsx(k.Item,{name:"remember",valuePropName:"checked",wrapperCol:{offset:0,span:10},children:xe.jsx(O,{children:"记住我"})}),xe.jsx(k.Item,{wrapperCol:{offset:4,span:18},children:xe.jsxs(g,{children:[xe.jsx(b,{type:"primary",htmlType:"submit",children:"登录"}),xe.jsx(W,{to:Ls,children:"注册新用户"})]})})]})})]})},Fs=G([{path:"/",element:xe.jsx($e,{}),children:[{path:"/",element:xe.jsx(Cs,{})},{path:"login",element:xe.jsx(_s,{})},{path:"register",element:xe.jsx(Ge,{})},{path:"manage",element:xe.jsx(He,{}),children:[{path:"list",element:xe.jsx(ns,{})},{path:"star",element:xe.jsx(os,{})},{path:"trash",element:xe.jsx(ls,{})}]},{path:"*",element:xe.jsx(Qe,{})}]},{path:"question",element:xe.jsx(Je,{}),children:[{path:"edit/:id",element:xe.jsx(ws,{})},{path:"stat/:id",element:xe.jsx(Ns,{})}]}],{basename:"/survey-sage"}),qs="/",Rs="/login",Ls="/register",Ts="/manage/list";const Os=()=>xe.jsx(z,{theme:{algorithm:D.defaultAlgorithm},children:xe.jsx(Q,{router:Fs})});me.createRoot(document.getElementById("root")).render(xe.jsx(p.StrictMode,{children:xe.jsx(U,{store:Se,children:xe.jsx(Os,{})})}));export{e as __vite_legacy_guard};
