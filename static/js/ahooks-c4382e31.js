import{r as t,c as n,g as e}from"./@ant-design/icons-127ef214.js";var r=function(){if("undefined"!=typeof Map)return Map;function t(t,n){var e=-1;return t.some((function(t,r){return t[0]===n&&(e=r,!0)})),e}return function(){function n(){this.__entries__=[]}return Object.defineProperty(n.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),n.prototype.get=function(n){var e=t(this.__entries__,n),r=this.__entries__[e];return r&&r[1]},n.prototype.set=function(n,e){var r=t(this.__entries__,n);~r?this.__entries__[r][1]=e:this.__entries__.push([n,e])},n.prototype.delete=function(n){var e=this.__entries__,r=t(e,n);~r&&e.splice(r,1)},n.prototype.has=function(n){return!!~t(this.__entries__,n)},n.prototype.clear=function(){this.__entries__.splice(0)},n.prototype.forEach=function(t,n){void 0===n&&(n=null);for(var e=0,r=this.__entries__;e<r.length;e++){var i=r[e];t.call(n,i[1],i[0])}},n}()}(),i="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,o="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),u="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(o):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)};var a=["top","right","bottom","left","width","height","size","weight"],c="undefined"!=typeof MutationObserver,s=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,n){var e=!1,r=!1,i=0;function o(){e&&(e=!1,t()),r&&c()}function a(){u(o)}function c(){var t=Date.now();if(e){if(t-i<2)return;r=!0}else e=!0,r=!1,setTimeout(a,n);i=t}return c}(this.refresh.bind(this),20)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var n=this.observers_,e=n.indexOf(t);~e&&n.splice(e,1),!n.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){i&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),c?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){i&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var n=t.propertyName,e=void 0===n?"":n;a.some((function(t){return!!~e.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),f=function(t,n){for(var e=0,r=Object.keys(n);e<r.length;e++){var i=r[e];Object.defineProperty(t,i,{value:n[i],enumerable:!1,writable:!1,configurable:!0})}return t},l=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||o},d=m(0,0,0,0);function h(t){return parseFloat(t)||0}function v(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];return n.reduce((function(n,e){return n+h(t["border-"+e+"-width"])}),0)}function p(t){var n=t.clientWidth,e=t.clientHeight;if(!n&&!e)return d;var r=l(t).getComputedStyle(t),i=function(t){for(var n={},e=0,r=["top","right","bottom","left"];e<r.length;e++){var i=r[e],o=t["padding-"+i];n[i]=h(o)}return n}(r),o=i.left+i.right,u=i.top+i.bottom,a=h(r.width),c=h(r.height);if("border-box"===r.boxSizing&&(Math.round(a+o)!==n&&(a-=v(r,"left","right")+o),Math.round(c+u)!==e&&(c-=v(r,"top","bottom")+u)),!function(t){return t===l(t).document.documentElement}(t)){var s=Math.round(a+o)-n,f=Math.round(c+u)-e;1!==Math.abs(s)&&(a-=s),1!==Math.abs(f)&&(c-=f)}return m(i.left,i.top,a,c)}var y="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof l(t).SVGGraphicsElement}:function(t){return t instanceof l(t).SVGElement&&"function"==typeof t.getBBox};function b(t){return i?y(t)?function(t){var n=t.getBBox();return m(0,0,n.width,n.height)}(t):p(t):d}function m(t,n,e,r){return{x:t,y:n,width:e,height:r}}var g=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=m(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=b(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),w=function(t,n){var e,r,i,o,u,a,c,s=(r=(e=n).x,i=e.y,o=e.width,u=e.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,c=Object.create(a.prototype),f(c,{x:r,y:i,width:o,height:u,top:i,right:r+o,bottom:u+i,left:r}),c);f(this,{target:t,contentRect:s})},_=function(){function t(t,n,e){if(this.activeObservations_=[],this.observations_=new r,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=n,this.callbackCtx_=e}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof l(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)||(n.set(t,new g(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof l(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)&&(n.delete(t),n.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(n){n.isActive()&&t.activeObservations_.push(n)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,n=this.activeObservations_.map((function(t){return new w(t.target,t.broadcastRect())}));this.callback_.call(t,n,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),O="undefined"!=typeof WeakMap?new WeakMap:new r,E=function t(n){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var e=s.getInstance(),r=new _(n,e,this);O.set(this,r)};["observe","unobserve","disconnect"].forEach((function(t){E.prototype[t]=function(){var n;return(n=O.get(this))[t].apply(n,arguments)}}));var T=void 0!==o.ResizeObserver?o.ResizeObserver:E,A=function(){return A=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t},A.apply(this,arguments)};function S(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e}function j(t,n,e,r){return new(e||(e=Promise))((function(i,o){function u(t){try{c(r.next(t))}catch(n){o(n)}}function a(t){try{c(r.throw(t))}catch(n){o(n)}}function c(t){var n;t.done?i(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(u,a)}c((r=r.apply(t,n||[])).next())}))}function R(t,n){var e,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(u=0)),u;)try{if(e=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!(i=u.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){u.label=a[1];break}if(6===a[0]&&u.label<i[1]){u.label=i[1],i=a;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(a);break}i[2]&&u.ops.pop(),u.trys.pop();continue}a=n.call(t,u)}catch(c){a=[6,c],r=0}finally{e=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}function M(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,i,o=e.call(t),u=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)u.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(e=o.return)&&e.call(o)}finally{if(i)throw i.error}}return u}function x(t,n,e){if(e||2===arguments.length)for(var r,i=0,o=n.length;i<o;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return t.concat(r||Array.prototype.slice.call(n))}"function"==typeof SuppressedError&&SuppressedError;var P=function(t){return"function"==typeof t};const D=!1;function C(n){D&&P(n);var e=t.useRef(n);e.current=t.useMemo((function(){return n}),[n]);var r=t.useRef();return r.current||(r.current=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.current.apply(this,t)}),r.current}const W=(H=t.useEffect,function(n,e){var r=t.useRef(!1);H((function(){return function(){r.current=!1}}),[]),H((function(){if(r.current)return n();r.current=!0}),e)});var H,L=function(n,e){var r=e.manual,i=e.ready,o=void 0===i||i,u=e.defaultParams,a=void 0===u?[]:u,c=e.refreshDeps,s=void 0===c?[]:c,f=e.refreshDepsAction,l=t.useRef(!1);return l.current=!1,W((function(){!r&&o&&(l.current=!0,n.run.apply(n,x([],M(a),!1)))}),[o]),W((function(){l.current||r||(l.current=!0,f?f():n.refresh())}),x([],M(s),!1)),{onBefore:function(){if(!o)return{stopNow:!0}}}};L.onInit=function(t){var n=t.ready,e=void 0===n||n;return{loading:!t.manual&&e}};const k=L;function B(n,e){var r=t.useRef({deps:e,obj:void 0,initialized:!1}).current;return!1!==r.initialized&&function(t,n){if(t===n)return!0;for(var e=0;e<t.length;e++)if(!Object.is(t[e],n[e]))return!1;return!0}(r.deps,e)||(r.deps=e,r.obj=n(),r.initialized=!0),r.obj}function F(n){var e=t.useRef(n);return e.current=n,e}const N=function(n){D&&P(n);var e=F(n);t.useEffect((function(){return function(){e.current()}}),[])};var z=new Map,I=new Map,q={},G=function(t,n){return q[t]||(q[t]=[]),q[t].push(n),function(){var e=q[t].indexOf(n);q[t].splice(e,1)}};const V=function(n,e){var r=e.cacheKey,i=e.cacheTime,o=void 0===i?3e5:i,u=e.staleTime,a=void 0===u?0:u,c=e.setCache,s=e.getCache,f=t.useRef(),l=t.useRef(),d=function(t,n){c?c(n):function(t,n,e){var r=z.get(t);(null==r?void 0:r.timer)&&clearTimeout(r.timer);var i=void 0;n>-1&&(i=setTimeout((function(){z.delete(t)}),n)),z.set(t,A(A({},e),{timer:i}))}(t,o,n),function(t,n){q[t]&&q[t].forEach((function(t){return t(n)}))}(t,n.data)},h=function(t,n){return void 0===n&&(n=[]),s?s(n):function(t){return z.get(t)}(t)};return B((function(){if(r){var t=h(r);t&&Object.hasOwnProperty.call(t,"data")&&(n.state.data=t.data,n.state.params=t.params,(-1===a||(new Date).getTime()-t.time<=a)&&(n.state.loading=!1)),f.current=G(r,(function(t){n.setState({data:t})}))}}),[]),N((function(){var t;null===(t=f.current)||void 0===t||t.call(f)})),r?{onBefore:function(t){var n=h(r,t);return n&&Object.hasOwnProperty.call(n,"data")?-1===a||(new Date).getTime()-n.time<=a?{loading:!1,data:null==n?void 0:n.data,error:void 0,returnNow:!0}:{data:null==n?void 0:n.data,error:void 0}:{}},onRequest:function(t,n){var e=function(t){return I.get(t)}(r);return e&&e!==l.current||(e=t.apply(void 0,x([],M(n),!1)),l.current=e,function(t,n){I.set(t,n),n.then((function(n){return I.delete(t),n})).catch((function(){I.delete(t)}))}(r,e)),{servicePromise:e}},onSuccess:function(t,e){var i;r&&(null===(i=f.current)||void 0===i||i.call(f),d(r,{data:t,params:e,time:(new Date).getTime()}),f.current=G(r,(function(t){n.setState({data:t})})))},onMutate:function(t){var e;r&&(null===(e=f.current)||void 0===e||e.call(f),d(r,{data:t,params:n.state.params,time:(new Date).getTime()}),f.current=G(r,(function(t){n.setState({data:t})})))}}:{}};var U=function(t){var n=typeof t;return null!=t&&("object"==n||"function"==n)},$="object"==typeof n&&n&&n.Object===Object&&n,K="object"==typeof self&&self&&self.Object===Object&&self,J=$||K||Function("return this")(),Q=J,X=function(){return Q.Date.now()},Y=/\s/;var Z=function(t){for(var n=t.length;n--&&Y.test(t.charAt(n)););return n},tt=/^\s+/;var nt=function(t){return t?t.slice(0,Z(t)+1).replace(tt,""):t},et=J.Symbol,rt=et,it=Object.prototype,ot=it.hasOwnProperty,ut=it.toString,at=rt?rt.toStringTag:void 0;var ct=function(t){var n=ot.call(t,at),e=t[at];try{t[at]=void 0;var r=!0}catch(o){}var i=ut.call(t);return r&&(n?t[at]=e:delete t[at]),i},st=Object.prototype.toString;var ft=ct,lt=function(t){return st.call(t)},dt=et?et.toStringTag:void 0;var ht=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":dt&&dt in Object(t)?ft(t):lt(t)},vt=function(t){return null!=t&&"object"==typeof t};var pt=nt,yt=U,bt=function(t){return"symbol"==typeof t||vt(t)&&"[object Symbol]"==ht(t)},mt=/^[-+]0x[0-9a-f]+$/i,gt=/^0b[01]+$/i,wt=/^0o[0-7]+$/i,_t=parseInt;var Ot=U,Et=X,Tt=function(t){if("number"==typeof t)return t;if(bt(t))return NaN;if(yt(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=yt(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=pt(t);var e=gt.test(t);return e||wt.test(t)?_t(t.slice(2),e?2:8):mt.test(t)?NaN:+t},At=Math.max,St=Math.min;var jt=function(t,n,e){var r,i,o,u,a,c,s=0,f=!1,l=!1,d=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function h(n){var e=r,o=i;return r=i=void 0,s=n,u=t.apply(o,e)}function v(t){var e=t-c;return void 0===c||e>=n||e<0||l&&t-s>=o}function p(){var t=Et();if(v(t))return y(t);a=setTimeout(p,function(t){var e=n-(t-c);return l?St(e,o-(t-s)):e}(t))}function y(t){return a=void 0,d&&r?h(t):(r=i=void 0,u)}function b(){var t=Et(),e=v(t);if(r=arguments,i=this,c=t,e){if(void 0===a)return function(t){return s=t,a=setTimeout(p,n),f?h(t):u}(c);if(l)return clearTimeout(a),a=setTimeout(p,n),h(c)}return void 0===a&&(a=setTimeout(p,n)),u}return n=Tt(n)||0,Ot(e)&&(f=!!e.leading,o=(l="maxWait"in e)?At(Tt(e.maxWait)||0,n):o,d="trailing"in e?!!e.trailing:d),b.cancel=function(){void 0!==a&&clearTimeout(a),s=0,r=c=i=a=void 0},b.flush=function(){return void 0===a?u:y(Et())},b};const Rt=e(jt);const Mt=function(n,e){var r=e.debounceWait,i=e.debounceLeading,o=e.debounceTrailing,u=e.debounceMaxWait,a=t.useRef(),c=t.useMemo((function(){var t={};return void 0!==i&&(t.leading=i),void 0!==o&&(t.trailing=o),void 0!==u&&(t.maxWait=u),t}),[i,o,u]);return t.useEffect((function(){if(r){var t=n.runAsync.bind(n);return a.current=Rt((function(t){t()}),r,c),n.runAsync=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return new Promise((function(e,r){var i;null===(i=a.current)||void 0===i||i.call(a,(function(){t.apply(void 0,x([],M(n),!1)).then(e).catch(r)}))}))},function(){var e;null===(e=a.current)||void 0===e||e.cancel(),n.runAsync=t}}}),[r,c]),r?{onCancel:function(){var t;null===(t=a.current)||void 0===t||t.cancel()}}:{}};const xt=function(n,e){var r=e.loadingDelay,i=e.ready,o=t.useRef();if(!r)return{};var u=function(){o.current&&clearTimeout(o.current)};return{onBefore:function(){return u(),!1!==i&&(o.current=setTimeout((function(){n.setState({loading:!0})}),r)),{loading:!1}},onFinally:function(){u()},onCancel:function(){u()}}};const Pt=!("undefined"==typeof window||!window.document||!window.document.createElement);function Dt(){return!Pt||"hidden"!==document.visibilityState}var Ct=[];if(Pt){window.addEventListener("visibilitychange",(function(){if(Dt())for(var t=0;t<Ct.length;t++){(0,Ct[t])()}}),!1)}const Wt=function(n,e){var r=e.pollingInterval,i=e.pollingWhenHidden,o=void 0===i||i,u=e.pollingErrorRetryCount,a=void 0===u?-1:u,c=t.useRef(),s=t.useRef(),f=t.useRef(0),l=function(){var t;c.current&&clearTimeout(c.current),null===(t=s.current)||void 0===t||t.call(s)};return W((function(){r||l()}),[r]),r?{onBefore:function(){l()},onError:function(){f.current+=1},onSuccess:function(){f.current=0},onFinally:function(){-1===a||-1!==a&&f.current<=a?c.current=setTimeout((function(){var t;o||Dt()?n.refresh():s.current=(t=function(){n.refresh()},Ct.push(t),function(){var n=Ct.indexOf(t);Ct.splice(n,1)})}),r):f.current=0},onCancel:function(){l()}}:{}};var Ht=[];if(Pt){var Lt=function(){if(Dt()&&(!Pt||void 0===navigator.onLine||navigator.onLine))for(var t=0;t<Ht.length;t++){(0,Ht[t])()}};window.addEventListener("visibilitychange",Lt,!1),window.addEventListener("focus",Lt,!1)}const kt=function(n,e){var r=e.refreshOnWindowFocus,i=e.focusTimespan,o=void 0===i?5e3:i,u=t.useRef(),a=function(){var t;null===(t=u.current)||void 0===t||t.call(u)};return t.useEffect((function(){if(r){var t=(i=n.refresh.bind(n),c=o,s=!1,function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];s||(s=!0,i.apply(void 0,x([],M(t),!1)),setTimeout((function(){s=!1}),c))});u.current=(e=function(){t()},Ht.push(e),function(){var t=Ht.indexOf(e);t>-1&&Ht.splice(t,1)})}var e,i,c,s;return function(){a()}}),[r,o]),N((function(){a()})),{}};const Bt=function(n,e){var r=e.retryInterval,i=e.retryCount,o=t.useRef(),u=t.useRef(0),a=t.useRef(!1);return i?{onBefore:function(){a.current||(u.current=0),a.current=!1,o.current&&clearTimeout(o.current)},onSuccess:function(){u.current=0},onError:function(){if(u.current+=1,-1===i||u.current<=i){var t=null!=r?r:Math.min(1e3*Math.pow(2,u.current),3e4);o.current=setTimeout((function(){a.current=!0,n.refresh()}),t)}else u.current=0},onCancel:function(){u.current=0,o.current&&clearTimeout(o.current)}}:{}};var Ft=jt,Nt=U;const zt=e((function(t,n,e){var r=!0,i=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return Nt(e)&&(r="leading"in e?!!e.leading:r,i="trailing"in e?!!e.trailing:i),Ft(t,n,{leading:r,maxWait:n,trailing:i})}));const It=function(n,e){var r=e.throttleWait,i=e.throttleLeading,o=e.throttleTrailing,u=t.useRef(),a={};return void 0!==i&&(a.leading=i),void 0!==o&&(a.trailing=o),t.useEffect((function(){if(r){var t=n.runAsync.bind(n);return u.current=zt((function(t){t()}),r,a),n.runAsync=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return new Promise((function(e,r){var i;null===(i=u.current)||void 0===i||i.call(u,(function(){t.apply(void 0,x([],M(n),!1)).then(e).catch(r)}))}))},function(){var e;n.runAsync=t,null===(e=u.current)||void 0===e||e.cancel()}}}),[r,i,o]),r?{onCancel:function(){var t;null===(t=u.current)||void 0===t||t.cancel()}}:{}};const qt=function(n){D&&P(n),t.useEffect((function(){null==n||n()}),[])};const Gt=function(){var n=M(t.useState({}),2)[1];return t.useCallback((function(){return n({})}),[])};const Vt=function(){function t(t,n,e,r){void 0===r&&(r={}),this.serviceRef=t,this.options=n,this.subscribe=e,this.initState=r,this.count=0,this.state={loading:!1,params:void 0,data:void 0,error:void 0},this.state=A(A(A({},this.state),{loading:!n.manual}),r)}return t.prototype.setState=function(t){void 0===t&&(t={}),this.state=A(A({},this.state),t),this.subscribe()},t.prototype.runPluginHandler=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];var r=this.pluginImpls.map((function(e){var r;return null===(r=e[t])||void 0===r?void 0:r.call.apply(r,x([e],M(n),!1))})).filter(Boolean);return Object.assign.apply(Object,x([{}],M(r),!1))},t.prototype.runAsync=function(){for(var t,n,e,r,i,o,u,a,c,s,f=[],l=0;l<arguments.length;l++)f[l]=arguments[l];return j(this,void 0,void 0,(function(){var l,d,h,v,p,y,b,m,g,w,_;return R(this,(function(O){switch(O.label){case 0:if(this.count+=1,l=this.count,d=this.runPluginHandler("onBefore",f),h=d.stopNow,v=void 0!==h&&h,p=d.returnNow,y=void 0!==p&&p,b=S(d,["stopNow","returnNow"]),v)return[2,new Promise((function(){}))];if(this.setState(A({loading:!0,params:f},b)),y)return[2,Promise.resolve(b.data)];null===(n=(t=this.options).onBefore)||void 0===n||n.call(t,f),O.label=1;case 1:return O.trys.push([1,3,,4]),(m=this.runPluginHandler("onRequest",this.serviceRef.current,f).servicePromise)||(m=(_=this.serviceRef).current.apply(_,x([],M(f),!1))),[4,m];case 2:return g=O.sent(),l!==this.count?[2,new Promise((function(){}))]:(this.setState({data:g,error:void 0,loading:!1}),null===(r=(e=this.options).onSuccess)||void 0===r||r.call(e,g,f),this.runPluginHandler("onSuccess",g,f),null===(o=(i=this.options).onFinally)||void 0===o||o.call(i,f,g,void 0),l===this.count&&this.runPluginHandler("onFinally",f,g,void 0),[2,g]);case 3:if(w=O.sent(),l!==this.count)return[2,new Promise((function(){}))];throw this.setState({error:w,loading:!1}),null===(a=(u=this.options).onError)||void 0===a||a.call(u,w,f),this.runPluginHandler("onError",w,f),null===(s=(c=this.options).onFinally)||void 0===s||s.call(c,f,void 0,w),l===this.count&&this.runPluginHandler("onFinally",f,void 0,w),w;case 4:return[2]}}))}))},t.prototype.run=function(){for(var t=this,n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];this.runAsync.apply(this,x([],M(n),!1)).catch((function(n){t.options.onError}))},t.prototype.cancel=function(){this.count+=1,this.setState({loading:!1}),this.runPluginHandler("onCancel")},t.prototype.refresh=function(){this.run.apply(this,x([],M(this.state.params||[]),!1))},t.prototype.refreshAsync=function(){return this.runAsync.apply(this,x([],M(this.state.params||[]),!1))},t.prototype.mutate=function(t){var n=P(t)?t(this.state.data):t;this.runPluginHandler("onMutate",n),this.setState({data:n})},t}();function Ut(t,n,e){return function(t,n,e){void 0===n&&(n={}),void 0===e&&(e=[]);var r=n.manual,i=void 0!==r&&r,o=S(n,["manual"]);D&&n.defaultParams&&Array.isArray(n.defaultParams);var u=A({manual:i},o),a=F(t),c=Gt(),s=B((function(){var t=e.map((function(t){var n;return null===(n=null==t?void 0:t.onInit)||void 0===n?void 0:n.call(t,u)})).filter(Boolean);return new Vt(a,u,c,Object.assign.apply(Object,x([{}],M(t),!1)))}),[]);return s.options=u,s.pluginImpls=e.map((function(t){return t(s,u)})),qt((function(){if(!i){var t=s.state.params||n.defaultParams||[];s.run.apply(s,x([],M(t),!1))}})),N((function(){s.cancel()})),{loading:s.state.loading,data:s.state.data,error:s.state.error,params:s.state.params||[],cancel:C(s.cancel.bind(s)),refresh:C(s.refresh.bind(s)),refreshAsync:C(s.refreshAsync.bind(s)),run:C(s.run.bind(s)),runAsync:C(s.runAsync.bind(s)),mutate:C(s.mutate.bind(s))}}(t,n,x(x([],M(e||[]),!1),[Mt,xt,Wt,kt,It,k,V,Bt],!1))}function $t(n,e){var r;D&&P(n);var i=F(n),o=null!==(r=null==e?void 0:e.wait)&&void 0!==r?r:1e3,u=t.useMemo((function(){return Rt((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return i.current.apply(i,x([],M(t),!1))}),o,e)}),[]);return N((function(){u.cancel()})),{run:u,cancel:u.cancel,flush:u.flush}}var Kt={restoreOnUnmount:!1};function Jt(n,e){void 0===e&&(e=Kt);var r=t.useRef(Pt?document.title:"");t.useEffect((function(){document.title=n}),[n]),N((function(){e.restoreOnUnmount&&(document.title=r.current)}))}export{$t as a,Jt as b,T as i,Ut as u};
