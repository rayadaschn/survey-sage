function e(){import.meta.url,import("_").catch((()=>1))}import{r as s,ad as t,ae as r,M as a,af as n,ag as i,ah as l,ab as c,ai as d,ac as o,aj as x,ak as h,R as j}from"./@ant-design/icons-70aec636.js";import{r as m,S as u,T as p,L as f,m as _,B as g,D as v,F as y,I as N,R as b,a as w,P as S,M as C,b as k,E as q,c as I,C as z,t as O}from"./antd-fa492b82.js";import{L as P,O as T,u as R,a as E,b as F,c as L,d as D,R as A}from"./react-router-dom-5ed4d8f0.js";import{a as M}from"./axios-83bdef92.js";import{u as W,a as $}from"./ahooks-e08d8f5e.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)})).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();var B={exports:{}},U={},H=s,J=Symbol.for("react.element"),K=Symbol.for("react.fragment"),Q=Object.prototype.hasOwnProperty,V=H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Y={key:!0,ref:!0,__self:!0,__source:!0};function G(e,s,t){var r,a={},n=null,i=null;for(r in void 0!==t&&(n=""+t),void 0!==s.key&&(n=""+s.key),void 0!==s.ref&&(i=s.ref),s)Q.call(s,r)&&!Y.hasOwnProperty(r)&&(a[r]=s[r]);if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===a[r]&&(a[r]=s[r]);return{$$typeof:J,type:e,key:n,ref:i,props:a,_owner:V.current}}U.Fragment=K,U.jsx=G,U.jsxs=G,B.exports=U;var X=B.exports;var Z={},ee=m;Z.createRoot=ee.createRoot,Z.hydrateRoot=ee.hydrateRoot;const se="_header_djf0z_1",te="_left_djf0z_4",re="_right_djf0z_7",ae="_main_djf0z_10",ne="_footer_djf0z_13",ie="_container_1fxih_1",{Title:le}=p,ce=()=>X.jsx("div",{className:ie,children:X.jsx(P,{to:"/",children:X.jsxs(u,{children:[X.jsx(le,{children:X.jsx(t,{})}),X.jsx(le,{children:"问卷调查"})]})})}),de=()=>X.jsx(X.Fragment,{children:X.jsx(P,{to:rs,children:"登录"})}),{Header:oe,Content:xe,Footer:he}=f,je=()=>X.jsxs(f,{children:[X.jsxs(oe,{className:se,children:[X.jsx("div",{className:te,children:X.jsx(ce,{})}),"MainLayout header",X.jsx("div",{className:re,children:X.jsx(de,{})})]}),X.jsx(xe,{className:ae,children:X.jsx(T,{})}),X.jsx(he,{className:ne,children:"文件调查@2023 Created by Huy"})]}),me="_container_drwq3_1",ue="_left_drwq3_7",pe="_right_drwq3_10",fe="keyword",_e=M.create({timeout:1e4,baseURL:"/"});async function ge(){return await _e.post("/api/question/")}_e.interceptors.response.use((e=>{const s=e.data||{},{errno:t,data:r,msg:a}=s;if(0!==t)throw a&&_.error(a),new Error(a);return r}));const ve=()=>{const e=R(),{pathname:s}=E(),{loading:t,run:l}=W(ge,{manual:!0,onSuccess(s){e("question/edit/".concat(s.id)),_.success("创建成功")}});return X.jsxs("div",{className:me,children:[X.jsx("div",{className:ue,children:X.jsxs(u,{direction:"vertical",children:[X.jsx(g,{type:"primary",size:"large",icon:X.jsx(r,{}),onClick:l,disabled:t,children:"新建问卷"}),X.jsx(v,{}),X.jsx(g,{type:s.startsWith("/manage/list")?"default":"text",size:"large",icon:X.jsx(a,{}),onClick:()=>e("/manage/list"),children:"我的问卷"}),X.jsx(g,{type:s.startsWith("/manage/star")?"default":"text",size:"large",icon:X.jsx(n,{}),onClick:()=>e("/manage/star"),children:"星标问卷"}),X.jsx(g,{type:s.startsWith("/manage/trash")?"default":"text",size:"large",icon:X.jsx(i,{}),onClick:()=>e("/manage/trash"),children:"回收站"})]})}),X.jsx("div",{className:pe,children:X.jsx(T,{})})]})},ye=()=>X.jsxs(X.Fragment,{children:[X.jsx("p",{children:"Question layout"}),X.jsx("div",{children:X.jsx(T,{})})]}),{Title:Ne}=p,be=()=>X.jsxs("div",{className:"flex flex-col items-center justify-center bg-white",children:[X.jsx("div",{children:X.jsxs(u,{children:[X.jsx(Ne,{level:2,children:X.jsx(l,{})}),X.jsx(Ne,{level:2,children:"注册新用户"})]})}),X.jsx("div",{children:X.jsxs(y,{labelCol:{span:6},wrapperCol:{span:16},onFinish:e=>{},children:[X.jsx(y.Item,{label:"用户名",name:"username",rules:[{required:!0,message:"请输入用户名"},{type:"string",min:5,max:20,message:"字符长度在 5-20 之间"},{pattern:/^\w+$/,message:"只能所字符下划线"}],children:X.jsx(N,{})}),X.jsx(y.Item,{label:"密码",name:"password",rules:[{required:!0,message:"请输入密码"}],children:X.jsx(N.Password,{})}),X.jsx(y.Item,{label:"确认密码",name:" confirm",rules:[{required:!0,message:"请输入密码"},({getFieldValue:e})=>({validator:(s,t)=>t&&e("password")!==t?Promise.reject(new Error("两次密码不一致")):Promise.resolve()})],children:X.jsx(N.Password,{})}),X.jsx(y.Item,{label:"昵称",name:"nickname",children:X.jsx(N,{})}),X.jsx(y.Item,{wrapperCol:{offset:4,span:18},children:X.jsxs(u,{children:[X.jsx(g,{type:"primary",htmlType:"submit",children:"注册"}),X.jsx(P,{to:rs,children:"已有账户，请登录"})]})})]})})]}),we=()=>{const e=R();return X.jsx(X.Fragment,{children:X.jsx(b,{status:"404",title:"404",subTitle:"抱歉，您访问的页面不存在",extra:X.jsx(g,{type:"primary",onClick:()=>e(as),children:"返回首页"})})})},Se={header:"_header_1euva_1",left:"_left_1euva_4",right:"_right_1euva_7",content:"_content_1euva_11",footer:"_footer_1euva_14"},Ce="_container_1bfhx_1",ke="_title_1bfhx_10",qe="_left_1bfhx_13",Ie="_right_1bfhx_16",ze="_button-container_1bfhx_21",{confirm:Oe}=C,Pe=e=>{const{id:s,title:t,isPublished:r,answerContent:a,currentAt:l,isStar:h}=e,j=R();return X.jsxs("div",{className:Ce,children:[X.jsxs("div",{className:ke,children:[X.jsx("div",{className:qe,children:X.jsx(P,{to:r?"/question/stat/".concat(s):"/question/edit/".concat(s),children:X.jsxs(u,{children:[h&&X.jsx(n,{style:{color:"red"}}),t]})})}),X.jsx("div",{className:Ie,children:X.jsxs(u,{children:[r?X.jsx(w,{color:"processing",children:"已发布"}):X.jsx(w,{children:"未发布"}),X.jsxs("span",{children:["答卷: ",a]}),X.jsx("span",{children:l})]})})]}),X.jsx(v,{className:"m-3"}),X.jsxs("div",{className:ze,children:[X.jsx("div",{className:qe,children:X.jsxs(u,{children:[X.jsx(g,{icon:X.jsx(c,{}),type:"text",size:"small",onClick:()=>{j("/question/edit/".concat(s))},children:"编辑问卷"}),X.jsx(g,{icon:X.jsx(d,{}),type:"text",size:"small",onClick:()=>{j("/question/stat/".concat(s))},children:"数据统计"})]})}),X.jsx("div",{className:Ie,children:X.jsxs(u,{children:[X.jsx(g,{type:"text",icon:X.jsx(n,{}),size:"small",children:"标星"}),X.jsx(S,{title:"确定复制该问卷?",okText:"确认",cancelText:"取消",onConfirm:()=>{},children:X.jsx(g,{type:"text",icon:X.jsx(o,{}),size:"small",children:"复制"})}),X.jsx(g,{type:"text",icon:X.jsx(i,{}),size:"small",onClick:()=>{Oe({title:"确定删除该问卷?",icon:X.jsx(x,{}),onOk:()=>_.success("删除")})},children:"删除"})]})})]})]})},{Search:Te}=N,Re=()=>{const e=R(),{pathname:t}=E(),[r,a]=s.useState("");const[n]=F();return s.useEffect((()=>{const e=n.get(fe)||"";a(e)}),[n]),X.jsx(Te,{placeholder:"请输入关键字",value:r,onChange:function(e){a(e.target.value)},onSearch:function(s){e({pathname:t,search:"".concat(fe,"=").concat(s)})},className:"w-50"})};function Ee(){const{id:e=""}=L(),[t,r]=s.useState(!0),[a,n]=s.useState({});return s.useEffect((()=>{!async function(){const s=await async function(e){const s="/api/question/".concat(e);return await _e.get(s)}(e);n(s),r(!1)}()}),[e]),{loading:t,questionData:a}}function Fe(e={}){const{isStar:s,isDeleted:t}=e,[r]=F(),{data:a,loading:n,error:i}=W((async()=>{const e=r.get(fe)||"",a=parseInt(r.get("page")||"")||1,n=parseInt(r.get("pageSize")||"")||10,i=await async function(e={}){return await _e.get("/api/question",{params:e})}({keyword:e,isStar:s,isDeleted:t,page:a,pageSize:n});return i}));return{data:a,loading:n,error:i}}const{Title:Le}=p,De=()=>{const{data:e={},loading:s}=Fe(),{list:t=[],total:r=0}=e;return X.jsxs(X.Fragment,{children:[X.jsxs("div",{className:Se.header,children:[X.jsx("div",{className:Se.left,children:X.jsx(Le,{level:3,children:"我的问卷"})}),X.jsx("div",{className:Se.right,children:X.jsx(Re,{})})]}),X.jsxs("div",{className:Se.content,children:[s&&X.jsx("div",{className:"text-center",children:X.jsx(k,{})}),t.length>0&&t.map((e=>{const{_id:s}=e;return X.jsx(Pe,{...e},s)}))]}),X.jsx("div",{className:Se.foot,children:"footer"})]})},Ae="_header_1euva_1",Me="_left_1euva_4",We="_right_1euva_7",$e="_content_1euva_11",{Title:Be}=p,{confirm:Ue}=C,He=()=>{$("问卷调查");const{data:e={},loading:t}=Fe({isStar:!0}),{list:r=[],total:a=0}=e,[n,i]=s.useState([]),l=[{title:"标题",dataIndex:"title"},{title:"是否发布",dataIndex:"isPublished",render:e=>e?X.jsx(w,{color:"processing",children:"已发布"}):X.jsx(w,{children:"未发布"})},{title:"答卷",dataIndex:"answerCount"},{title:"创建时间",dataIndex:"createdAt"}];return X.jsxs(X.Fragment,{children:[X.jsxs("div",{className:Ae,children:[X.jsx("div",{className:Me,children:X.jsx(Be,{level:3,children:"回收站"})}),X.jsx("div",{className:We,children:X.jsx(Re,{})})]}),X.jsxs("div",{className:$e,children:[t&&X.jsx("div",{className:"text-center",children:X.jsx(k,{})}),!t&&0===r.length&&X.jsx(q,{description:"暂无数据"}),r.length>0&&X.jsxs("div",{children:[X.jsxs(u,{className:"mb",children:[X.jsx(g,{type:"primary",disabled:0===n.length,children:"恢复"}),X.jsx(g,{danger:!0,disabled:0===n.length,onClick:()=>{Ue({title:"确定彻底删除该问卷?",icon:X.jsx(h,{}),content:"删除以后不可撤回",onOk:()=>alert("删除")})},children:"彻底删除"})]}),X.jsx(I,{rowKey:e=>e._id,dataSource:r,columns:l,pagination:!1,rowSelection:{type:"checkbox",onChange:e=>{i(e)}}})]})]})]})},Je={header:"_header_1euva_1",left:"_left_1euva_4",right:"_right_1euva_7",content:"_content_1euva_11",footer:"_footer_1euva_14"},{Title:Ke}=p,Qe=()=>{const{data:e={},loading:s}=Fe({isStar:!0}),{list:t=[],total:r=0}=e;return X.jsxs(X.Fragment,{children:[X.jsxs("div",{className:Je.header,children:[X.jsx("div",{className:Je.left,children:X.jsx(Ke,{level:3,children:"星标问卷"})}),X.jsx("div",{className:Je.right,children:X.jsx(Re,{})})]}),X.jsxs("div",{className:Je.content,children:[s&&X.jsx("div",{className:"text-center",children:X.jsx(k,{})}),!s&&0===t.length&&X.jsx(q,{description:"暂无数据"}),t.length>0&&t.map((e=>{const{_id:s}=e;return X.jsx(Pe,{...e},s)}))]}),X.jsx("div",{className:Je.foot,children:"分页"})]})},Ve=()=>{const{loading:e,questionData:s}=Ee();return X.jsxs("div",{children:[X.jsx("p",{children:"编辑"}),e?X.jsx("p",{children:"loading"}):X.jsx("p",{children:JSON.stringify(s)})]})},Ye=()=>{const{loading:e,questionData:s}=Ee();return X.jsxs("div",{children:[X.jsx("p",{children:"Stat"}),e?X.jsx("p",{children:"loading"}):X.jsx("p",{children:JSON.stringify(s)})]})},{Title:Ge,Paragraph:Xe}=p,Ze=()=>{const e=R();return X.jsx("div",{className:"h-150 flex flex-col items-center justify-center",children:X.jsxs("div",{className:"text-center",children:[X.jsx(Ge,{children:"问卷调查 | 在线投票"}),X.jsx(Xe,{children:"已经累计创建问卷 500 份，发布问卷 80 份，收到答卷 2000 份"}),X.jsx("div",{className:"h-15 font-24",children:X.jsx(g,{className:"b-rounded-4",type:"primary",onClick:()=>e(as),children:"开始使用"})})]})})},{Title:es}=p,ss=()=>X.jsxs("div",{className:"flex flex-col items-center justify-center bg-white",children:[X.jsx("div",{children:X.jsxs(u,{children:[X.jsx(es,{level:2,children:X.jsx(l,{})}),X.jsx(es,{level:2,children:"登录"})]})}),X.jsx("div",{children:X.jsxs(y,{labelCol:{span:6},wrapperCol:{span:16},onFinish:e=>{},children:[X.jsx(y.Item,{label:"用户名",name:"username",rules:[{required:!0,message:"请输入用户名"},{type:"string",min:5,max:20,message:"字符长度在 5-20 之间"},{pattern:/^\w+$/,message:"只能所字符下划线"}],children:X.jsx(N,{})}),X.jsx(y.Item,{label:"密码",name:"password",rules:[{required:!0,message:"请输入密码"}],children:X.jsx(N.Password,{})}),X.jsx(y.Item,{wrapperCol:{offset:4,span:18},children:X.jsxs(u,{children:[X.jsx(g,{type:"primary",htmlType:"submit",children:"登录"}),X.jsx(P,{to:"/",children:"注册新用户"})]})})]})})]}),ts=D([{path:"/",element:X.jsx(je,{}),children:[{path:"/",element:X.jsx(Ze,{})},{path:"login",element:X.jsx(ss,{})},{path:"register",element:X.jsx(be,{})},{path:"manage",element:X.jsx(ve,{}),children:[{path:"list",element:X.jsx(De,{})},{path:"star",element:X.jsx(Qe,{})},{path:"trash",element:X.jsx(He,{})}]},{path:"*",element:X.jsx(we,{})}]},{path:"question",element:X.jsx(ye,{}),children:[{path:"edit/:id",element:X.jsx(Ve,{})},{path:"stat/:id",element:X.jsx(Ye,{})}]}],{basename:"/survey-sage"}),rs="/login",as="/manage/list",ns=()=>X.jsx(z,{theme:{algorithm:O.defaultAlgorithm},children:X.jsx(A,{router:ts})});Z.createRoot(document.getElementById("root")).render(X.jsx(j.StrictMode,{children:X.jsx(ns,{})}));export{e as __vite_legacy_guard};
