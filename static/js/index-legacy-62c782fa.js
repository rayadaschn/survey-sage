System.register(["./index-legacy-95335f36.js","./react-redux-legacy-ae375a2f.js","./ahooks-legacy-d8b4bfed.js","./index-legacy-2f866b2e.js","./@ant-design/icons-legacy-3b08bf95.js","./antd-legacy-dca60dc3.js","./react-router-dom-legacy-4de26926.js","./@dnd-kit/core-legacy-21272773.js","./@dnd-kit/utilities-legacy-ded65fa0.js","./@reduxjs/toolkit-legacy-00116e75.js","./@dnd-kit/sortable-legacy-67e03475.js","./lodash-es-legacy-e3523841.js","./redux-undo-legacy-f3ba457c.js","./axios-legacy-787fab56.js","./recharts-legacy-da0924fe.js"],(function(e,t){"use strict";var s,n,l,i,c,r,a,d,o,x,u,j,p,h,m,y,g,v,f,C,S,b,N,w,k,I,T;return{setters:[e=>{s=e.k,n=e.j,l=e.S},null,e=>{i=e.F,c=e.H},e=>{r=e.a,a=e.u,d=e.g,o=e.b},e=>{x=e.r,u=e.ae,j=e.au,p=e.O,h=e.z},e=>{m=e.a,y=e.R,g=e.B,v=e.S,f=e.I,C=e.f,S=e.i,b=e.Q,N=e.T,w=e.d,k=e.c},e=>{I=e.b,T=e.d},null,null,null,null,null,null,null,null],execute:function(){const t=()=>n.jsx("div",{className:"mt-15 text-center",children:n.jsx(m,{})}),$=()=>{const e=I();return n.jsx("div",{className:"flex-1",children:n.jsx(y,{status:"warning",title:"该页面尚未发布",extra:n.jsx(g,{type:"primary",onClick:()=>e(-1),children:"返回"})})})},z=()=>{const e=I(),{title:t}=r(),{id:s}=T(),l=x.useRef(null),i=x.useMemo((()=>{const e=`http://localhost:5173/survey-sage/question/${s}`,t=n.jsx("div",{className:"text-center",children:n.jsx(b,{value:e||"-"})});return n.jsxs(v,{children:[n.jsx(f,{value:e,style:{width:"300px"},ref:l}),n.jsx(C,{title:"拷贝链接",children:n.jsx(g,{icon:n.jsx(u,{}),onClick:()=>{const t=l.current;if(null!=t){t.select();try{navigator.clipboard.writeText(e)}catch(s){}}}})}),n.jsx(S,{content:t,children:n.jsx(g,{icon:n.jsx(j,{})})})]})}),[s]);return n.jsx("div",{className:"border-coolGray border-b-solid bg-white py-3",children:n.jsxs("div",{className:"mx-6 flex",children:[n.jsx("div",{className:"flex-1",children:n.jsxs(v,{children:[n.jsx(g,{type:"link",icon:n.jsx(p,{}),onClick:()=>{e(-1)},children:"返回"}),n.jsx("span",{className:"text-5 line-height-none",children:t})]})}),n.jsx("div",{className:"flex-1 text-center",children:i}),n.jsx("div",{className:"flex-1 text-right",children:n.jsx(g,{type:"primary",onClick:()=>{e(`/question/edit/${s}`)},children:"编辑问卷"})})]})})},q=e=>{const{selectedComponentId:t,setSelectedComponentId:s,setSelectedComponentType:l}=e,{componentList:i}=a();return n.jsx("div",{className:"min-h-full overflow-y-auto bg-white",children:i.filter((e=>!e.isHidden)).map((e=>{const{fe_id:i,props:c,type:r}=e,a=d(r);if(null==a)return null;const{Component:o}=a,x=h({"m-3 border-solid border-white px-2 py-3 b-rounded hover:border-blueGray":!0,"border-gray":i===t});return n.jsx("div",{className:x,onClick:()=>{s(i),l(r)},children:n.jsx("div",{className:"pointer-events-none opacity-[0.8]",children:n.jsx(o,{...c})})},i)}))})},{Title:F}=N,_=e=>{const{selectedComponentId:t,setSelectedComponentId:c,setSelectedComponentType:r}=e,{id:d=""}=T(),[o,u]=x.useState(1),[j,p]=x.useState(l),[h,y]=x.useState(0),[g,v]=x.useState([]),{loading:f}=i((async()=>await async function(e,t){const n=`/api/stat/${e}`;return await s.get(n,{params:t})}(d,{page:o,pageSize:j})),{refreshDeps:[d,o,j],onSuccess(e){const{total:t,list:s=[]}=e;y(t),v(s)}}),{componentList:C}=a(),S=C.map((e=>{const{fe_id:s,title:l,props:i={},type:a}=e,d=i.title||l;return{title:n.jsx("div",{style:{cursor:"pointer"},onClick:()=>{c(s),r(a)},children:n.jsx("span",{style:{color:s===t?"#1890ff":"inherit"},children:d})}),dataIndex:s}})),b=g.map((e=>({...e,key:e._id}))),N=n.jsxs(n.Fragment,{children:[n.jsx(w,{columns:S,dataSource:b,pagination:!1}),n.jsx("div",{style:{textAlign:"center",marginTop:"18px"},children:n.jsx(k,{total:h,pageSize:j,current:o,onChange:e=>u(e),onShowSizeChange:(e,t)=>{u(e),p(t)}})})]});return n.jsxs("div",{children:[n.jsxs(F,{level:3,children:["答卷数量: ",!f&&h]}),f&&n.jsx("div",{style:{textAlign:"center"},children:n.jsx(m,{})}),!f&&N]})},{Title:A}=N,D=e=>{const{selectedComponentId:t,selectedComponentType:l}=e,{id:c=""}=T(),[r,a]=x.useState([]),{run:o}=i((async(e,t)=>await async function(e,t){const n=`/api/stat/${e}/${t}`;return await s.get(n)}(e,t)),{manual:!0,onSuccess(e){a(e.stat)}});return x.useEffect((()=>{t&&o(c,t)}),[c,t]),n.jsxs(n.Fragment,{children:[n.jsx(A,{level:3,children:"图表统计"}),n.jsx("div",{children:(()=>{if(!t)return n.jsx("div",{children:"暂未选中组件"});const{StatComponent:e}=d(l)||{};return null==e?n.jsx("div",{children:"该组件暂无统计图表"}):n.jsx(e,{stat:r})})()})]})},G=()=>{const[e,t]=x.useState(""),[s,l]=x.useState("");return n.jsxs("div",{className:"mx-6 h-full flex",children:[n.jsx("div",{className:"w-73 bg-white px-3",children:n.jsx(q,{selectedComponentId:e,setSelectedComponentId:t,setSelectedComponentType:l})}),n.jsx("div",{className:"relative mx-3 flex-1 overflow-hidden",children:n.jsx(_,{selectedComponentId:e,setSelectedComponentId:t,setSelectedComponentType:l})}),n.jsx("div",{className:"w-75 bg-white px-3",children:n.jsx(D,{selectedComponentId:e,selectedComponentType:s})})]})};e("default",(()=>{const{loading:e,questionData:s}=o(),{title:l,isPubulished:i}=r();return c(`问卷调查 - ${l}`),i?n.jsx($,{}):n.jsxs("div",{className:"min-h-screen flex flex-col bg-cyan",children:[n.jsx(z,{}),n.jsxs("div",{className:"flex-1 py-3",children:[e&&n.jsx(t,{}),!e&&n.jsx(G,{})]})]})}))}}}));
